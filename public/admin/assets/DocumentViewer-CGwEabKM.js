import{c as F,r as p,j as e,X as D,E as k,F as $,t as L}from"./index-sc-SFr2S.js";import{D as C}from"./download-DJF4dsJ7.js";const M=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],U=F("external-link",M);const T=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],E=F("file",T),V=({isOpen:r,onClose:n,children:b,title:N,size:o="max-w-4xl",showHeader:c=!0,headerActions:m=null})=>{const[u,f]=p.useState(!1),[a,w]=p.useState(!1);if(p.useEffect(()=>(r?(f(!0),setTimeout(()=>w(!0),10),document.body.style.overflow="hidden"):(w(!1),setTimeout(()=>{f(!1),document.body.style.overflow="unset"},300)),()=>{document.body.style.overflow="unset"}),[r]),!u)return null;const d=l=>{l.target===l.currentTarget&&n()},i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl",full:"max-w-[95vw] max-h-[95vh]"};return e.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 transition-all duration-300 ${a?"bg-black/60 backdrop-blur-sm opacity-100":"bg-black/0 backdrop-blur-none opacity-0"}`,onClick:d,children:e.jsxs("div",{className:`relative w-full ${i[o]||o} bg-white rounded-xl md:rounded-2xl shadow-2xl transition-all duration-300 transform flex flex-col max-h-[90vh] md:max-h-[85vh] ${a?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4"}`,onClick:l=>l.stopPropagation(),children:[c&&e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-slate-100 flex-shrink-0",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-900 truncate pr-4 leading-6",children:N}),e.jsxs("div",{className:"flex items-center gap-2",children:[m,e.jsx("button",{onClick:n,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-all duration-200","aria-label":"Close",children:e.jsx(D,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"relative flex-1 overflow-hidden flex flex-col min-h-0",children:b})]})})},I=({src:r,fileName:n="Document",fileType:b=null,showPreview:N=!0,className:o="",variant:c="button"})=>{const[m,u]=p.useState(!1),a=(t=>{if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))return t;const s=t.replace(/^\/+/,"");return`${L}/${s}`})(r),d=b||(t=>{if(!t)return"";const s=t.match(/\.([^.]+)$/);return s?s[1].toLowerCase():""})(r),i=d==="pdf",l=["jpg","jpeg","png","gif","webp","bmp"].includes(d),g=async()=>{try{const s=await(await fetch(a)).blob(),y=window.URL.createObjectURL(s),x=document.createElement("a");x.href=y,x.download=n,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(y)}catch(t){console.error("Download failed:",t)}},h=()=>{const t=document.createElement("a");t.href=a,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)},j=()=>{if(i){h();return}l?u(!0):h()};if(!r)return e.jsx("span",{className:"text-xs text-slate-400",children:"No document"});const v=()=>!m||!i&&!l?null:e.jsx(V,{isOpen:m,onClose:()=>u(!1),title:n,size:"full",headerActions:e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:g,className:"text-slate-600 hover:text-slate-800 transition-all duration-200 flex items-center gap-2 px-3 py-1.5 hover:bg-slate-100 rounded-lg",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Download"})]}),e.jsxs("button",{onClick:h,className:"text-slate-600 hover:text-slate-800 transition-all duration-200 flex items-center gap-2 px-3 py-1.5 hover:bg-slate-100 rounded-lg",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"New Tab"})]})]}),children:e.jsx("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(95vh - 100px)"},children:i?e.jsx("iframe",{src:`${a}#toolbar=1&navpanes=1&scrollbar=1`,className:"w-full h-full min-h-[600px] border-0 rounded-lg shadow-inner",title:n,onError:t=>{t.target.style.display="none";const s=document.createElement("div");s.className="text-center py-12",s.innerHTML=`
                  <div class="text-slate-600 mb-4">Unable to preview PDF in browser.</div>
                  <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors" onclick="window.open('${a}', '_blank')">
                    Open in New Tab
                  </button>
                `,t.target.parentNode.appendChild(s)}}):l?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:a,alt:n,className:"max-w-full max-h-[80vh] object-contain shadow-lg rounded-lg"})}):null})});return c==="button"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex gap-2 ${o}`,children:[e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-all duration-200",children:[e.jsx(k,{className:"w-4 h-4"}),"View"]}),e.jsxs("button",{onClick:g,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-50 rounded-lg transition-all duration-200",children:[e.jsx(C,{className:"w-4 h-4"}),"Download"]})]}),v()]}):c==="link"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:j,className:`text-blue-600 hover:text-blue-800 hover:underline text-sm inline-flex items-center gap-1 transition-all duration-200 ${o}`,children:[e.jsx(k,{className:"w-3 h-3"}),"View Document"]}),v()]}):c==="card"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-all duration-200 ${o}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:i?e.jsx($,{className:"w-10 h-10 text-red-500"}):l?e.jsx(E,{className:"w-10 h-10 text-blue-500"}):e.jsx(E,{className:"w-10 h-10 text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:n}),e.jsxs("p",{className:"text-xs text-slate-500 uppercase mt-1",children:[d," file"]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:j,className:"text-xs text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"View"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:g,className:"text-xs text-slate-600 hover:text-slate-800 font-medium transition-colors",children:"Download"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:h,className:"text-xs text-slate-600 hover:text-slate-800 font-medium transition-colors",children:"Open in New Tab"})]})]})]})}),v()]}):null};export{V as A,I as D,U as E};
