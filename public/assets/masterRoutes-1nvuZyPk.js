import{c as Ce,j as e,P as Z,B as w,E as De,u as q,r as a,z as p,I as O,q as X,b as R,t as we,v as Pe,w as k,N as Ee}from"./index-f2aTh8Q9.js";import{T as ye,D as H}from"./DataTable-CZSwVV32.js";import{P as M}from"./PageHeader-C1BYbgZ6.js";import{P as Le}from"./pen-GrH3TWDv.js";import{g as Y,d as Fe,a as Ae,u as Te,c as Ie,b as qe,e as $e,f as Be,h as Oe,i as ze,j as _e,k as Re,l as He,m as Me,n as Ue,o as je,p as Qe,q as Ge,r as Ke,s as We,t as Je,v as Ye,w as Xe,x as Ze,y as Ve,z as et,A as fe,B as tt,C as V,D as Ne,E as st,F as at,G as rt,H as it,I as nt,J as lt,K as ct,L as ot,M as dt,N as mt,O as ut,P as pt,Q as xt,R as ht,S as gt,T as _t,U as ft,V as bt,W as vt,X as yt,Y as jt,Z as Nt,_ as St,$ as kt,a0 as Ct,a1 as Dt,a2 as wt,a3 as Pt,a4 as Et,a5 as Lt,a6 as Ft,a7 as At,a8 as Tt,a9 as Se,aa as It,ab as qt,ac as $t}from"./master.service-Dpyd0E1I.js";import{u as Bt}from"./useDebounce-CD3y76_H.js";import{A as U}from"./arrow-left-D3u76-63.js";import{P as Ot}from"./plus-CEVaGo_4.js";import{S as zt}from"./Switch-DXS_Q9o7.js";import{M as be}from"./MediaViewer-Cqptyhs4.js";import{U as ve}from"./upload-DbsggVh3.js";import"./triangle-alert-0CRYubsC.js";import"./DocumentViewer-DQz3PaPC.js";import"./download-BV06V_bB.js";const Rt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Q=Ce("save",Rt),G=({onView:t,onEdit:u,onDelete:g,viewPermission:c,editPermission:y,deletePermission:x,customActions:S})=>e.jsxs("div",{className:"flex items-center gap-2",children:[S,t&&e.jsx(Z,{permissions:c,fallback:null,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:t,className:"text-slate-500 hover:text-blue-600 hover:bg-blue-50",title:"View",children:e.jsx(De,{className:"h-4 w-4"})})}),u&&e.jsx(Z,{permissions:y,fallback:null,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:u,className:"text-slate-500 hover:text-blue-600 hover:bg-blue-50",title:"Edit",children:e.jsx(Le,{className:"h-4 w-4"})})}),g&&e.jsx(Z,{permissions:x,fallback:null,children:e.jsx(w,{variant:"ghost",size:"sm",onClick:g,className:"text-slate-500 hover:text-red-600 hover:bg-red-50",title:"Delete",children:e.jsx(ye,{className:"h-4 w-4"})})})]}),Ht=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await Y({page:_,limit:d,search:x,include_inactive:!0});g(i.districts||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch districts",i),p.error(i.message||"Failed to load districts")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{const l=i.map(v=>v.district_id);await Promise.all(l.map(v=>Fe(v))),p.success("District(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete district")}},C=a.useMemo(()=>[{key:"district_name",header:"Name (EN)",sortable:!0},{key:"district_name_mr",header:"Name (MR)",sortable:!0},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/districts/view/${l.district_id}`),onEdit:()=>t(`/masters/districts/edit/${l.district_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.districts.view",editPermission:"masters.districts.edit",deletePermission:"masters.districts.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Districts",description:"Manage districts master data",actionLabel:"Add District",onAction:()=>t("/masters/districts/add"),permission:"masters.districts.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"district_id",headerClassName:"bg-slate-900 text-white"})]})},Mt=()=>{const[t,u]=a.useState(!1),[g,c]=a.useState([]);return{transliterate:a.useCallback(async(x,S="mr-t-i0-und")=>{if(!x||!x.trim())return"";u(!0);try{const _=`https://inputtools.google.com/request?text=${encodeURIComponent(x)}&itc=${S}&num=5&cp=0&cs=1&ie=utf-8&oe=utf-8`,d=await(await fetch(_)).json();if(d&&d[0]==="SUCCESS"){const f=d[1][0][1][0],n=d[1][0][1];return c(n),f}return x}catch(_){return console.error("Transliteration failed:",_),x}finally{u(!1)}},[]),suggestions:g,loading:t}},z=({label:t,value:u,onChange:g,labelMr:c,valueMr:y,onChangeMr:x,isTextArea:S=!1,required:_=!1,disabled:m=!1,placeholder:d="",placeholderMr:f="",className:n="",error:s,errorMr:o,manualTranslate:r=!1,translateButtonLabel:N="Translate to Marathi"})=>{const{transliterate:b,loading:C}=Mt(),i=Bt(u,500),[l,v]=a.useState(!1),P=a.useRef("");a.useEffect(()=>{if(!r){if(!u){y&&x({target:{value:""}}),P.current="";return}i&&i!==P.current&&!m&&(b(i).then(I=>{x({target:{value:I}})}),P.current=i)}},[i,m,r,x,b,u,y]);const L=async()=>{if(!u||m)return;const I=await b(u);x({target:{value:I}}),v(!1)};return r?e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] items-start gap-4 ${n}`,children:[e.jsx("div",{children:S?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:[t," ",_&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:u,onChange:g,disabled:m,placeholder:d,className:`w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 shadow-sm min-h-[80px] ${s?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}`}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s})]}):e.jsx(O,{label:t,value:u,onChange:g,required:_,disabled:m,placeholder:d,error:s})}),e.jsx("div",{className:"flex md:flex-col items-center justify-center gap-2 md:mt-8",children:e.jsx("button",{type:"button",onClick:L,className:"px-3 py-2 md:px-4 md:py-2 rounded-lg border border-blue-200 bg-blue-50 hover:bg-blue-100 text-blue-700 text-sm font-medium shadow-sm transition-colors disabled:opacity-60 disabled:cursor-not-allowed",disabled:!u||C||m,children:C?"Translating…":N})}),e.jsx("div",{className:"relative",children:S?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5 flex justify-between items-center",children:[e.jsx("span",{children:c||`${t} (Marathi)`}),C&&e.jsx(X,{className:"h-3 w-3 animate-spin text-blue-500"})]}),e.jsx("textarea",{value:y,onChange:I=>{v(!0),x(I)},disabled:m,placeholder:f||d,className:`w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 shadow-sm min-h-[80px] ${o?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}`}),o&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o})]}):e.jsxs("div",{className:"relative",children:[e.jsx(O,{label:c||`${t} (Marathi)`,value:y,onChange:I=>{v(!0),x(I)},disabled:m,placeholder:f||d,error:o}),C&&e.jsx("div",{className:"absolute right-3 top-9",children:e.jsx(X,{className:"h-4 w-4 animate-spin text-blue-500"})})]})})]}):e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 ${n}`,children:[e.jsx("div",{children:S?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:[t," ",_&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:u,onChange:g,disabled:m,placeholder:d,className:`w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 shadow-sm min-h-[80px] ${s?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}`}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s})]}):e.jsx(O,{label:t,value:u,onChange:g,required:_,disabled:m,placeholder:d,error:s})}),e.jsx("div",{className:"relative",children:S?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5 flex justify-between items-center",children:[e.jsx("span",{children:c||`${t} (Marathi)`}),e.jsxs("div",{className:"flex items-center gap-2",children:[r&&!m&&e.jsx("button",{type:"button",onClick:L,className:"text-xs px-2 py-1 border border-slate-300 rounded-md bg-white hover:bg-slate-50 text-slate-700 transition-colors",disabled:!u||C,children:N}),C&&e.jsx(X,{className:"h-3 w-3 animate-spin text-blue-500"})]})]}),e.jsx("textarea",{value:y,onChange:I=>{v(!0),x(I)},disabled:m,placeholder:f||d,className:`w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 shadow-sm min-h-[80px] ${o?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""}`}),o&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{label:c||`${t} (Marathi)`,value:y,onChange:I=>{v(!0),x(I)},disabled:m,placeholder:f||d,error:o}),r&&!m&&e.jsx("button",{type:"button",onClick:L,className:"ml-2 mt-7 h-10 px-3 border border-slate-300 rounded-lg bg-white hover:bg-slate-50 text-xs text-slate-700 whitespace-nowrap shadow-sm transition-colors",disabled:!u||C,children:C?"Translating...":N})]}),C&&!r&&e.jsx("div",{className:"absolute right-3 top-9",children:e.jsx(X,{className:"h-4 w-4 animate-spin text-blue-500"})})]})})]})},re=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState({district_name:"",district_name_mr:"",is_active:!0});a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const s=await Ae(g);d({district_name:s.district_name_en||s.district_name,district_name_mr:s.district_name_mr||"",is_active:s.is_active})}catch(s){console.error("Failed to fetch district",s),p.error("Failed to load district details"),u("/masters/districts")}finally{_(!1)}})()},[g,c,t,u]);const f=async n=>{if(n.preventDefault(),!m.district_name){p.error("District Name is required");return}x(!0);try{c?(await Te(g,m),p.success("District updated successfully")):(await Ie(m),p.success("District created successfully")),u("/masters/districts")}catch(s){console.error("Save failed",s),p.error(s.message||"Failed to save district")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 ml-[-10px]",children:[e.jsx(w,{onClick:()=>u("/masters/districts"),variant:"ghost",leftIcon:e.jsx(U,{className:"h-5 w-5 "})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:t?"View District":c?"Edit District":"Add New District"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(z,{label:"District Name",value:m.district_name,onChange:n=>d(s=>({...s,district_name:n.target.value})),valueMr:m.district_name_mr,onChangeMr:n=>d(s=>({...s,district_name_mr:n.target.value})),placeholder:"Enter district name",placeholderMr:"पुणे",required:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:n=>d(s=>({...s,is_active:n.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/districts"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update District":"Create District"})]})]})})]})},Ut=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await qe({page:_,limit:d,search:x,include_inactive:!0});g(i.talukas||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch talukas",i),p.error(i.message||"Failed to load talukas")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{const l=i.map(v=>v.taluka_id);await Promise.all(l.map(v=>$e(v))),p.success("Taluka(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete taluka")}},C=a.useMemo(()=>[{key:"taluka_name",header:"Name (EN)",sortable:!0},{key:"taluka_name_mr",header:"Name (MR)",sortable:!0},{key:"district_name",header:"District",sortable:!0,render:(i,l)=>l.district?.district_name||l.district_name||"-"},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/talukas/view/${l.taluka_id}`),onEdit:()=>t(`/masters/talukas/edit/${l.taluka_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.talukas.view",editPermission:"masters.talukas.edit",deletePermission:"masters.talukas.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Talukas",description:"Manage talukas master data",actionLabel:"Add Taluka",onAction:()=>t("/masters/talukas/add"),permission:"masters.talukas.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,deletePermission:"masters.talukas.delete",pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"taluka_id",headerClassName:"bg-slate-900 text-white"})]})},ie=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(!0),[m,d]=a.useState([]),[f,n]=a.useState({taluka_name:"",taluka_name_mr:"",district_id:"",is_active:!0});a.useEffect(()=>{(async()=>{_(!0);try{const r=await Y({is_active:!0}),N=Array.isArray(r)?r:r.districts||[];if(d(N),c||t){const b=await Be(g);n({taluka_name:b.taluka_name_en||b.taluka_name,taluka_name_mr:b.taluka_name_mr||"",district_id:b.district_id||"",is_active:b.is_active})}}catch(r){console.error("Failed to load data",r),p.error("Failed to load form data"),c&&u("/masters/talukas")}finally{_(!1)}})()},[g,c,t,u]);const s=async o=>{if(o.preventDefault(),!f.taluka_name){p.error("Taluka Name is required");return}if(!f.district_id){p.error("District is required");return}x(!0);try{c?(await Oe(g,f),p.success("Taluka updated successfully")):(await ze(f),p.success("Taluka created successfully")),u("/masters/talukas")}catch(r){console.error("Save failed",r),p.error(r.message||"Failed to save taluka")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/talukas"),leftIcon:e.jsx(U,{className:"h-4 w-4 mr-2"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Taluka":c?"Edit Taluka":"Add New Taluka"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["District ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:f.district_id,onChange:o=>n(r=>({...r,district_id:o.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:t,children:[e.jsx("option",{value:"",children:"Select District"}),m.map(o=>e.jsx("option",{value:o.district_id,children:o.district_name},o.district_id))]})]}),e.jsx(z,{label:"Taluka Name",value:f.taluka_name,onChange:o=>n(r=>({...r,taluka_name:o.target.value})),valueMr:f.taluka_name_mr,onChangeMr:o=>n(r=>({...r,taluka_name_mr:o.target.value})),placeholder:"Enter taluka name",placeholderMr:"बारामती",disabled:t,required:!0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:o=>n(r=>({...r,is_active:o.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/talukas"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update Taluka":"Create Taluka"})]})]})})]})},Qt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await _e({page:_,limit:d,search:x,include_inactive:!0});g(i.components||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch components",i),p.error(i.message||"Failed to load components")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{const l=i.map(v=>v.component_id);await Promise.all(l.map(v=>Re(v))),p.success("Component(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete component")}},C=a.useMemo(()=>[{key:"component_code",header:"OSC Code",sortable:!0},{key:"component_name",header:"OSC Name (EN)",sortable:!0},{key:"component_name_mr",header:"OSC Name (MR)",sortable:!0},{key:"district",header:"District",sortable:!1,render:(i,l)=>l.district?.district_name||""},{key:"description",header:"Description",sortable:!0},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/components/view/${l.component_id}`),onEdit:()=>t(`/masters/components/edit/${l.component_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.components.view",editPermission:"masters.components.edit",deletePermission:"masters.components.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"One Stop Centers (OSC)",description:"Manage One Stop Centers master data",actionLabel:"Add OSC",onAction:()=>t("/masters/components/add"),permission:"masters.components.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"component_id",headerClassName:"bg-slate-900 text-white"})]})},ne=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState([]),[f,n]=a.useState({component_code:"",component_name:"",component_name_mr:"",district_id:"",description:"",description_mr:"",is_active:!0});a.useEffect(()=>{(async()=>{_(!0);try{const r=await Y({is_active:!0}),N=Array.isArray(r)?r:r.districts||[];if(d(N),c||t){const b=await He(g);n({component_code:b.component_code||"",component_name:b.component_name_en||b.component_name,component_name_mr:b.component_name_mr||"",district_id:b.district_id||"",description:b.description_en||b.description||"",description_mr:b.description_mr||"",is_active:b.is_active})}}catch(r){console.error("Failed to load component form data",r),p.error("Failed to load component details"),(c||t)&&u("/masters/components")}finally{_(!1)}})()},[g,c,t,u]);const s=async o=>{if(o.preventDefault(),!f.component_code){p.error("Component Code is required");return}if(!f.component_name){p.error("Component Name is required");return}x(!0);try{const r={...f};r.district_id=r.district_id===""?null:Number(r.district_id),c?(await Me(g,r),p.success("Component updated successfully")):(await Ue(r),p.success("Component created successfully")),u("/masters/components")}catch(r){console.error("Save failed",r),p.error(r.message||"Failed to save component")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/components"),leftIcon:e.jsx(U,{className:"h-4 w-4 mr-2"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View OSC":c?"Edit OSC":"Add OSC"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t?"One Stop Center details":c?"Update OSC information":"Create a new One Stop Center"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"OSC Code",value:f.component_code,onChange:o=>n(r=>({...r,component_code:o.target.value})),placeholder:"e.g. OSC_MUM",required:!0,disabled:t||c}),e.jsx(z,{label:"OSC Name",value:f.component_name,onChange:o=>n(r=>({...r,component_name:o.target.value})),valueMr:f.component_name_mr,onChangeMr:o=>n(r=>({...r,component_name_mr:o.target.value})),placeholder:"Mumbai OSC",placeholderMr:"मुंबई OSC",required:!0,disabled:t,manualTranslate:!0,translateButtonLabel:"Translate"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"District"}),e.jsxs("select",{value:f.district_id,onChange:o=>n(r=>({...r,district_id:o.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t,children:[e.jsx("option",{value:"",children:"Select District"}),m.map(o=>e.jsx("option",{value:o.district_id,children:o.district_name},o.district_id))]})]}),e.jsx(z,{label:"Description",value:f.description,onChange:o=>n(r=>({...r,description:o.target.value})),valueMr:f.description_mr,onChangeMr:o=>n(r=>({...r,description_mr:o.target.value})),placeholder:"Enter description...",placeholderMr:"मराठी वर्णन",isTextArea:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:o=>n(r=>({...r,is_active:o.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/components"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update OSC":"Create OSC"})]})]})})]})},Gt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await je({page:_,limit:d,search:x,include_inactive:!0});g(i.hubs||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch hubs",i),p.error(i.message||"Failed to load hubs")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{const l=i.map(v=>v.hub_id);await Promise.all(l.map(v=>Qe(v))),p.success("Hub(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete hub")}},C=a.useMemo(()=>[{key:"hub_code",header:"Hub Code",sortable:!0},{key:"hub_name",header:"Hub Name (EN)",sortable:!0},{key:"hub_name_mr",header:"Hub Name (MR)",sortable:!0},{key:"district",header:"District",sortable:!1,render:(i,l)=>l.district?.district_name||""},{key:"description",header:"Description",sortable:!0},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/hubs/view/${l.hub_id}`),onEdit:()=>t(`/masters/hubs/edit/${l.hub_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.hubs.view",editPermission:"masters.hubs.edit",deletePermission:"masters.hubs.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Hubs",description:"Manage Hub master data",actionLabel:"Add Hub",onAction:()=>t("/masters/hubs/add"),permission:"masters.hubs.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"hub_id",headerClassName:"bg-slate-900 text-white"})]})},le=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState([]),[f,n]=a.useState({hub_code:"",hub_name:"",hub_name_mr:"",district_id:"",description:"",description_mr:"",is_active:!0});a.useEffect(()=>{(async()=>{_(!0);try{const r=await Y({is_active:!0}),N=Array.isArray(r)?r:r.districts||[];if(d(N),c||t){const b=await Ge(g);n({hub_code:b.hub_code||"",hub_name:b.hub_name_en||b.hub_name||"",hub_name_mr:b.hub_name_mr||"",district_id:b.district_id?String(b.district_id):"",description:b.description_en||b.description||"",description_mr:b.description_mr||"",is_active:b.is_active!==void 0?b.is_active:!0})}}catch(r){console.error("Failed to load hub form data",r);const N=r.response?.data?.message||r.message||"Failed to load hub details";p.error(N),(c||t)&&u("/masters/hubs")}finally{_(!1)}})()},[g,c,t,u]);const s=async o=>{if(o.preventDefault(),!f.hub_code){p.error("Hub Code is required");return}if(!f.hub_name){p.error("Hub Name is required");return}x(!0);try{const r={...f};r.district_id=r.district_id===""?null:Number(r.district_id),c?(await Ke(g,r),p.success("Hub updated successfully")):(await We(r),p.success("Hub created successfully")),u("/masters/hubs")}catch(r){console.error("Save failed",r),p.error(r.message||"Failed to save hub")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/hubs"),leftIcon:e.jsx(U,{className:"h-4 w-4 mr-2"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Hub":c?"Edit Hub":"Add Hub"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t?"Hub details":c?"Update hub information":"Create a new hub"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"Hub Code",value:f.hub_code,onChange:o=>n(r=>({...r,hub_code:o.target.value})),placeholder:"e.g. HUB_MUM_01",required:!0,disabled:t||c}),e.jsx(z,{label:"Hub Name",value:f.hub_name,onChange:o=>n(r=>({...r,hub_name:o.target.value})),valueMr:f.hub_name_mr,onChangeMr:o=>n(r=>({...r,hub_name_mr:o.target.value})),placeholder:"Mumbai Hub",placeholderMr:"मुंबई हब",required:!0,disabled:t,manualTranslate:!0,translateButtonLabel:"Translate"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"District"}),e.jsxs("select",{value:f.district_id,onChange:o=>n(r=>({...r,district_id:o.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t,children:[e.jsx("option",{value:"",children:"Select District"}),m.map(o=>e.jsx("option",{value:o.district_id,children:o.district_name},o.district_id))]})]}),e.jsx(z,{label:"Description",value:f.description,onChange:o=>n(r=>({...r,description:o.target.value})),valueMr:f.description_mr,onChangeMr:o=>n(r=>({...r,description_mr:o.target.value})),placeholder:"Enter description...",placeholderMr:"मराठी वर्णन",isTextArea:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:o=>n(r=>({...r,is_active:o.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/hubs"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update Hub":"Create Hub"})]})]})})]})},Kt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await Je({page:_,limit:d,search:x,include_inactive:!0});g(i.departments||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch departments",i),p.error(i.message||"Failed to load departments")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{const l=i.map(v=>v.department_id);await Promise.all(l.map(v=>Ye(v))),p.success("Department(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete department")}},C=a.useMemo(()=>[{key:"department_code",header:"Code",sortable:!0},{key:"department_name",header:"Name (EN)",sortable:!0},{key:"department_name_mr",header:"Name (MR)",sortable:!0},{key:"description",header:"Description",sortable:!0},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/departments/view/${l.department_id}`),onEdit:()=>t(`/masters/departments/edit/${l.department_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.departments.view",editPermission:"masters.departments.edit",deletePermission:"masters.departments.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Departments",description:"Manage department master data",actionLabel:"Add Department",onAction:()=>t("/masters/departments/add"),permission:"masters.departments.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"department_id",headerClassName:"bg-slate-900 text-white"})]})},ce=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState({department_code:"",department_name:"",department_name_mr:"",description:"",description_mr:"",is_active:!0});a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const s=await Xe(g);d({department_code:s.department_code||"",department_name:s.department_name_en||s.department_name||"",department_name_mr:s.department_name_mr||"",description:s.description||"",description_mr:s.description_mr||"",is_active:s.is_active})}catch(s){console.error("Failed to fetch department",s),p.error("Failed to load department details"),u("/masters/departments")}finally{_(!1)}})()},[g,c,t,u]);const f=async n=>{if(n.preventDefault(),!m.department_code){p.error("Department Code is required");return}if(!m.department_name){p.error("Department Name is required");return}x(!0);try{c?(await Ze(g,m),p.success("Department updated successfully")):(await Ve(m),p.success("Department created successfully")),u("/masters/departments")}catch(s){console.error("Save failed",s),p.error(s.message||"Failed to save department")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/departments"),leftIcon:e.jsx(U,{className:"h-4 w-4 mr-2"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Department":c?"Edit Department":"Add New Department"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"Department Code",value:m.department_code,onChange:n=>d(s=>({...s,department_code:n.target.value})),placeholder:"e.g. DWCD",required:!0,disabled:c||t}),e.jsx(z,{label:"Department Name",value:m.department_name,onChange:n=>d(s=>({...s,department_name:n.target.value})),valueMr:m.department_name_mr,onChangeMr:n=>d(s=>({...s,department_name_mr:n.target.value})),placeholder:"Women and Child Development",placeholderMr:"महिला आणि बाल विकास विभाग",disabled:t,required:!0}),e.jsx(z,{label:"Description",value:m.description,onChange:n=>d(s=>({...s,description:n.target.value})),valueMr:m.description_mr,onChangeMr:n=>d(s=>({...s,description_mr:n.target.value})),placeholder:"Describe department roles...",placeholderMr:"विभागाची भूमिका...",isTextArea:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:n=>d(s=>({...s,is_active:n.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/departments"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update Department":"Create Department"})]})]})})]})},Wt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),[N,b]=a.useState([]),[C,i]=a.useState(""),[l,v]=a.useState([]),[P,L]=a.useState(!1),[I,D]=a.useState({min_education_level_id:"",max_education_level_id:""}),[$,ee]=a.useState([]),[j,h]=a.useState(!1),F=a.useCallback(async()=>{y(!0);try{const E=await et({page:_,limit:d,search:x,include_inactive:!0,district_id:C||void 0});g(E.posts||[]),s(E.pagination?.totalPages||1),r(E.pagination?.total??E.pagination?.totalItems??0)}catch(E){console.error("Failed to fetch posts",E),p.error(E.message||"Failed to load posts")}finally{y(!1)}},[_,d,x,C]);a.useEffect(()=>{F(),A(),te()},[F]);const A=async()=>{try{const E=await fe({is_active:!0});ee(Array.isArray(E)?E:E.educationLevels||[])}catch(E){console.error("Failed to load bulk options",E)}},te=async()=>{try{const E=await Y({is_active:!0});b(Array.isArray(E)?E:E.districts||[])}catch(E){console.error("Failed to load districts",E)}},K=async E=>{if(!(!E||E.length===0))try{const B=E.map(W=>W.post_id);await Promise.all(B.map(W=>tt(W))),p.success("Post(s) deleted successfully"),F(),v([])}catch(B){console.error("Delete failed",B),p.error(B.message||"Failed to delete post")}},se=a.useMemo(()=>[{key:"post_code",header:"Code",sortable:!0},{key:"post_name",header:"Name (EN)",sortable:!0},{key:"component",header:"OSC",className:"text-center",render:(E,B)=>B.component?.component_name||"-"},{key:"total_positions",header:"Positions",className:"text-center",render:(E,B)=>`${B.total_positions||0}`},{key:"gender",header:"Gender",className:"text-center",render:(E,B)=>B.female_only?e.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium bg-pink-50 text-pink-700",children:"Female Only"}):B.male_only?e.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium bg-blue-50 text-blue-700",children:"Male Only"}):e.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium bg-slate-50 text-slate-700",children:"All"})},{key:"is_active",header:"Status",className:"text-center",render:(E,B)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${B.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:B.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",className:"text-center",render:(E,B,W)=>e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{onView:()=>t(`/masters/posts/view/${B.post_id}`),onEdit:()=>t(`/masters/posts/edit/${B.post_id}`),onDelete:()=>W?.onDelete?.(),viewPermission:"masters.posts.view",editPermission:"masters.posts.edit",deletePermission:"masters.posts.delete"})})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Posts",description:"Manage posts master data",actionLabel:"Add Post",onAction:()=>t("/masters/posts/add"),permission:"masters.posts.create"}),e.jsx(H,{columns:se,data:u,onSearch:S,showRowNumbers:!0,onDelete:K,onSelectionChange:v,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:E=>{f(E),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"post_id",headerClassName:"bg-slate-900 text-white",extraHeaderContent:e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 border border-slate-200 rounded-md px-3 py-2 shadow-sm",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600",children:"District"}),e.jsxs("select",{value:C,onChange:E=>{i(E.target.value),m(1)},className:"text-sm bg-white border border-slate-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-[160px]",children:[e.jsx("option",{value:"",children:"All Districts"}),N.map(E=>e.jsx("option",{value:E.district_id,children:E.district_name},E.district_id))]})]})})]})},oe=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(!0),[m,d]=a.useState([]),[f,n]=a.useState([]),[s,o]=a.useState([]),[r,N]=a.useState([]),[b,C]=a.useState([]),[i,l]=a.useState([]),[v,P]=a.useState([]),[L,I]=a.useState([]),[D,$]=a.useState({post_code:"",post_name:"",post_name_mr:"",description:"",description_mr:"",component_id:"",hub_id:"",district_id:"",min_education_level_id:"",max_education_level_id:"",allowed_category_ids:[],min_qualification:"",min_experience_months:"",min_age:"",max_age:"",district_specific:!1,female_only:!1,male_only:!1,required_domains:"",opening_date:"",closing_date:"",total_positions:"",experience_domain_id:"",is_active:!0});a.useEffect(()=>{S||(async()=>{try{const h={is_active:!0};D.district_id&&(h.district_id=D.district_id);const F=await _e(h),A=Array.isArray(F)?F:F.components||[];d(A)}catch(h){console.error("Failed to load components",h)}})()},[D.district_id,S]),a.useEffect(()=>{S||(async()=>{try{const h={is_active:!0};D.district_id&&(h.district_id=D.district_id);const F=await je(h),A=Array.isArray(F)?F:F.hubs||[];n(A)}catch(h){console.error("Failed to load hubs",h)}})()},[D.district_id,S]),a.useEffect(()=>{(async()=>{_(!0);try{const h=await _e({is_active:!0}),F=Array.isArray(h)?h:h.components||[];d(F);const A=await Y({is_active:!0}),te=Array.isArray(A)?A:A.districts||[];l(te);const K=await V({is_active:!0}),se=Array.isArray(K)?K:K.documentTypes||[];o(se);const E=await fe({is_active:!0});C(Array.isArray(E)?E:E.educationLevels||[]);const B=await Ne({is_active:!0});P(Array.isArray(B)?B:B.domains||B.experienceDomains||[]);const W=Array.isArray(K)?K:K.documentTypes||[];if(I(W.filter(T=>T.is_mandatory)),c||t){const T=await st(g);$({post_code:T.post_code||"",post_name:T.post_name_en||T.post_name||"",post_name_mr:T.post_name_mr||"",description:T.description_en||T.description||"",description_mr:T.description_mr||"",component_id:T.component_id||"",hub_id:T.hub_id||"",district_id:T.district_id||"",min_education_level_id:T.min_education_level_id||"",max_education_level_id:T.max_education_level_id||"",allowed_category_ids:T.allowed_category_ids||[],min_qualification:T.min_qualification||"",min_experience_months:T.min_experience_months||"",min_age:T.min_age||"",max_age:T.max_age||"",district_specific:T.district_specific||!1,female_only:T.female_only===!0,male_only:T.male_only===!0,required_domains:T.required_domains||"",opening_date:T.opening_date||"",closing_date:T.closing_date||"",total_positions:T.total_positions||"",experience_domain_id:T.experience_domain_id||"",is_active:T.is_active});try{const J=await at(g),ke=Array.isArray(J)?J:J.requirements||J||[];N(ke.map(ae=>({doc_type_id:ae.doc_type_id,requirement_type:ae.requirement_type||"M",mandatory_at_application:ae.mandatory_at_application!==!1})))}catch(J){console.warn("Failed to load post documents",J)}}}catch(h){console.error("Failed to load data",h),p.error("Failed to load form data"),(c||t)&&u("/masters/posts")}finally{_(!1)}})()},[g,c,t,u]);const ee=async j=>{if(j.preventDefault(),!D.post_code){p.error("Post Code is required");return}if(!D.post_name){p.error("Post Name is required");return}if(!D.component_id){p.error("Component is required");return}x(!0);try{const h={...D};if(delete h.allowed_category_ids,h.min_experience_months&&(h.min_experience_months=Number(h.min_experience_months)),h.min_age&&(h.min_age=Number(h.min_age)),h.max_age&&(h.max_age=Number(h.max_age)),h.total_positions&&(h.total_positions=Number(h.total_positions)),h.min_experience_months<0){p.error("Experience cannot be negative"),x(!1);return}if(h.min_age<0){p.error("Min Age cannot be negative"),x(!1);return}if(h.max_age<0){p.error("Max Age cannot be negative"),x(!1);return}if(h.total_positions<0){p.error("Total Positions cannot be negative"),x(!1);return}h.component_id!==""&&(h.component_id=Number(h.component_id)),h.hub_id=h.hub_id===""?null:Number(h.hub_id),h.district_id=h.district_id===""?null:Number(h.district_id),h.min_education_level_id=h.min_education_level_id===""?null:Number(h.min_education_level_id),h.max_education_level_id=h.max_education_level_id===""?null:Number(h.max_education_level_id),h.experience_domain_id=h.experience_domain_id===""?null:Number(h.experience_domain_id);let F=g;if(c)await rt(g,h),p.success("Post updated successfully");else{const A=await it(h);F=A.post_id||A.id,p.success("Post created successfully")}if(r.length>0||c)try{await nt(F,{requirements:r.map(A=>({doc_type_id:Number(A.doc_type_id),requirement_type:A.requirement_type,mandatory_at_application:A.mandatory_at_application}))})}catch(A){console.error("Failed to save documents",A),p.error("Post saved but failed to update document requirements")}u("/masters/posts")}catch(h){console.error("Save failed",h),p.error(h.message||"Failed to save post")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 px-3 md:px-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/posts"),leftIcon:e.jsx(U,{className:"h-4 w-4 mr-2"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Post":c?"Edit Post":"Add New Post"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:ee,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(O,{label:"Post Code",value:D.post_code,onChange:j=>$(h=>({...h,post_code:j.target.value})),placeholder:"e.g. OSC_CA",required:!0,disabled:t||c}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["District ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:D.district_id,onChange:j=>$(h=>({...h,district_id:j.target.value,component_id:""})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t,required:!0,children:[e.jsx("option",{value:"",children:"Select District"}),i.map(j=>e.jsx("option",{value:j.district_id,children:j.district_name},j.district_id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["OSC (One Stop Center) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:D.component_id,onChange:j=>$(h=>({...h,component_id:j.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:t||!D.district_id,children:[e.jsx("option",{value:"",children:"Select OSC"}),m.map(j=>e.jsx("option",{value:j.component_id,children:j.component_name},j.component_id))]}),!D.district_id&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Please select a district first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hub"}),e.jsxs("select",{value:D.hub_id,onChange:j=>$(h=>({...h,hub_id:j.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t||!D.district_id,children:[e.jsx("option",{value:"",children:"Select Hub (Optional)"}),f.map(j=>e.jsx("option",{value:j.hub_id,children:j.hub_name},j.hub_id))]}),!D.district_id&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Please select a district first"})]}),e.jsx(z,{label:"Post Name",value:D.post_name,onChange:j=>$(h=>({...h,post_name:j.target.value})),valueMr:D.post_name_mr,onChangeMr:j=>$(h=>({...h,post_name_mr:j.target.value})),placeholder:"Center Administrator",placeholderMr:"केंद्र प्रशासक",required:!0,disabled:t,manualTranslate:!0,translateButtonLabel:"Translate",className:"md:col-span-2"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Min Qualification ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:D.min_education_level_id,onChange:j=>$(h=>({...h,min_education_level_id:j.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t,required:!0,children:[e.jsx("option",{value:"",children:"Select Level"}),b.map(j=>e.jsx("option",{value:j.level_id,children:j.level_name},j.level_id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Max Qualification ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:D.max_education_level_id,onChange:j=>$(h=>({...h,max_education_level_id:j.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t,required:!0,children:[e.jsx("option",{value:"",children:"No Limit"}),b.map(j=>e.jsx("option",{value:j.level_id,children:j.level_name},j.level_id))]})]}),e.jsx(O,{label:"Min Experience (Months)",type:"number",value:D.min_experience_months,onChange:j=>$(h=>({...h,min_experience_months:j.target.value})),placeholder:"24",min:"0",disabled:t,required:!0}),e.jsx(O,{label:"Min Age",type:"number",value:D.min_age,onChange:j=>$(h=>({...h,min_age:j.target.value})),placeholder:"21",min:"0",disabled:t,required:!0}),e.jsx(O,{label:"Max Age",type:"number",value:D.max_age,onChange:j=>$(h=>({...h,max_age:j.target.value})),placeholder:"45",min:"0",disabled:t}),e.jsx(O,{label:"Opening Date",type:"date",value:D.opening_date,onChange:j=>{const h=j.target.value;$(F=>{let A=F.closing_date;return A&&A<=h&&(A=""),{...F,opening_date:h,closing_date:A}})},disabled:t}),e.jsx(O,{label:"Closing Date",type:"date",value:D.closing_date,min:D.opening_date?new Date(new Date(D.opening_date).getTime()+864e5).toISOString().split("T")[0]:"",onChange:j=>$(h=>({...h,closing_date:j.target.value})),disabled:t||!D.opening_date}),e.jsx(O,{label:"Total Positions",type:"number",value:D.total_positions,onChange:j=>$(h=>({...h,total_positions:j.target.value})),placeholder:"10",min:"0",disabled:t}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gender Eligibility"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.female_only,onChange:j=>$(h=>({...h,female_only:j.target.checked,male_only:j.target.checked?!1:h.male_only})),disabled:t,className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Female Only"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.male_only,onChange:j=>$(h=>({...h,male_only:j.target.checked,female_only:j.target.checked?!1:h.female_only})),disabled:t,className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Male Only"})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:!D.female_only&&!D.male_only?"Post is open for all genders":""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Required Experience Domain"}),e.jsxs("select",{value:D.experience_domain_id,onChange:j=>$(h=>({...h,experience_domain_id:j.target.value})),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t,children:[e.jsx("option",{value:"",children:"Select Experience Domain"}),v.map(j=>e.jsx("option",{value:j.domain_id,children:j.domain_name},j.domain_id))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(z,{label:"Description",value:D.description,onChange:j=>$(h=>({...h,description:j.target.value})),valueMr:D.description_mr,onChangeMr:j=>$(h=>({...h,description_mr:j.target.value})),placeholder:"Enter description...",placeholderMr:"मराठी वर्णन",isTextArea:!0,disabled:t,manualTranslate:!0,translateButtonLabel:"Translate",className:"md:col-span-2"})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:D.is_active,onChange:j=>$(h=>({...h,is_active:j.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Document Requirements"}),!t&&e.jsx(w,{type:"button",variant:"outline",size:"sm",onClick:()=>N([...r,{doc_type_id:"",requirement_type:"M",mandatory_at_application:!0}]),leftIcon:e.jsx(Ot,{className:"h-4 w-4"}),children:"Add Document"})]}),e.jsxs("div",{className:"space-y-3",children:[r.length===0&&e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No document requirements added."}),r.map((j,h)=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Document Type"}),e.jsxs("select",{value:j.doc_type_id,onChange:F=>{const A=[...r];A[h].doc_type_id=F.target.value,N(A)},className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm",disabled:t,required:!0,children:[e.jsx("option",{value:"",children:"Select Document"}),s.map(F=>e.jsx("option",{value:F.doc_type_id,children:F.doc_type_name},F.doc_type_id))]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-2 md:mt-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`req_${h}`,checked:j.requirement_type==="M",onChange:F=>{const A=[...r];A[h].requirement_type=F.target.checked?"M":"O",N(A)},className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:`req_${h}`,className:"text-sm font-medium text-slate-700",children:"Mandatory"})]}),!t&&e.jsx(w,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>{const F=[...r];F.splice(h,1),N(F)},children:e.jsx(ye,{className:"h-4 w-4"})})]})]},h))]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/posts"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update Post":"Create Post"})]})]})})]})},Jt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await V({page:_,limit:d,search:x,include_inactive:!0});g(i.documentTypes||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch document types",i),p.error(i.message||"Failed to load document types")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{await Promise.all(i.map(l=>lt(l.doc_type_id))),p.success("Document type(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete document type")}},C=a.useMemo(()=>[{key:"doc_type_code",header:"Code",sortable:!0},{key:"doc_type_name",header:"Name (EN)",sortable:!0},{key:"is_mandatory",header:"Mandatory",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_mandatory?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-700"}`,children:l.is_mandatory?"Yes":"No"})},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/document-types/view/${l.doc_type_id}`),onEdit:()=>t(`/masters/document-types/edit/${l.doc_type_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.document_types.view",editPermission:"masters.document_types.edit",deletePermission:"masters.document_types.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Document Types",description:"Manage document types master data",actionLabel:"Add Document Type",onAction:()=>t("/masters/document-types/add"),permission:"masters.document_types.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"doc_type_id",headerClassName:"bg-slate-900 text-white"})]})},de=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState({doc_type_code:"",doc_type_name:"",doc_type_name_mr:"",description:"",description_mr:"",is_mandatory:!1,allowed_formats:"",max_size_mb:"",is_active:!0});a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const s=await ct(g);d({doc_type_code:s.doc_type_code||"",doc_type_name:s.doc_type_name_en||s.doc_type_name||"",doc_type_name_mr:s.doc_type_name_mr||"",description:s.description_en||s.description||"",description_mr:s.description_mr||"",is_mandatory:s.is_mandatory||!1,allowed_formats:s.allowed_formats||"",max_size_mb:s.max_size_mb||"",is_active:s.is_active})}catch(s){console.error("Failed to fetch document type",s),p.error("Failed to load document type details"),u("/masters/document-types")}finally{_(!1)}})()},[g,c,t,u]);const f=async n=>{if(n.preventDefault(),!m.doc_type_code||!m.doc_type_name){p.error("Code and Name are required");return}x(!0);try{const s={...m};if(s.max_size_mb&&(s.max_size_mb=Number(s.max_size_mb),s.max_size_mb<0)){p.error("Max Size cannot be negative"),x(!1);return}c?(await ot(g,s),p.success("Document type updated successfully")):(await dt(s),p.success("Document type created successfully")),u("/masters/document-types")}catch(s){console.error("Save failed",s),p.error(s.message||"Failed to save document type")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/document-types"),leftIcon:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Document Type":c?"Edit Document Type":"Add New Document Type"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"Document Type Code",value:m.doc_type_code,onChange:n=>d(s=>({...s,doc_type_code:n.target.value})),placeholder:"AADHAR",required:!0,disabled:t||c}),e.jsx(z,{label:"Document Type Name",value:m.doc_type_name,onChange:n=>d(s=>({...s,doc_type_name:n.target.value})),valueMr:m.doc_type_name_mr,onChangeMr:n=>d(s=>({...s,doc_type_name_mr:n.target.value})),placeholder:"Aadhaar Card",placeholderMr:"आधार कार्ड",disabled:t,required:!0}),e.jsx(z,{label:"Description",value:m.description,onChange:n=>d(s=>({...s,description:n.target.value})),valueMr:m.description_mr,onChangeMr:n=>d(s=>({...s,description_mr:n.target.value})),placeholder:"Enter description...",placeholderMr:"मराठी वर्णन",isTextArea:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_mandatory",checked:m.is_mandatory,onChange:n=>d(s=>({...s,is_mandatory:n.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_mandatory",className:"text-sm font-medium text-slate-700",children:"Mandatory"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:n=>d(s=>({...s,is_active:n.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/document-types"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update":"Create"})]})]})})]})},Yt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),o=a.useCallback(async()=>{y(!0);try{const b=await mt({page:_,limit:d,search:x,include_inactive:!0});g(b.statuses||[]),s(b.pagination?.totalPages||1)}catch(b){console.error("Failed to fetch statuses",b),p.error(b.message||"Failed to load statuses")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{o()},[o]);const r=async b=>{if(!(!b||b.length===0))try{await Promise.all(b.map(C=>ut(C.status_id))),p.success("Status(es) deleted successfully"),o()}catch(C){console.error("Delete failed",C),p.error(C.message||"Failed to delete status")}},N=a.useMemo(()=>[{key:"status_code",header:"Code",sortable:!0},{key:"status_name",header:"Name (EN)",sortable:!0},{key:"display_order",header:"Display Order",sortable:!0},{key:"is_active",header:"Status",render:b=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${b.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:b.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:b=>e.jsx(G,{onView:()=>t(`/masters/application-statuses/view/${b.status_id}`),onEdit:()=>t(`/masters/application-statuses/edit/${b.status_id}`),onDelete:()=>r([b]),viewPermission:"masters.application_statuses.view",editPermission:"masters.application_statuses.edit",deletePermission:"masters.application_statuses.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Application Statuses",description:"Manage application statuses master data",actionLabel:"Add Status",onAction:()=>t("/masters/application-statuses/add"),permission:"masters.application_statuses.create"}),e.jsx(H,{columns:N,data:u,onSearch:S,showRowNumbers:!0,onDelete:r,pagination:{currentPage:_,totalPages:n,onPageChange:m,pageSize:d,onPageSizeChange:f,pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"status_id"})]})},me=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState({status_code:"",status_name:"",status_name_mr:"",description:"",description_mr:"",display_order:"",is_active:!0});a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const s=await pt(g);d({status_code:s.status_code||"",status_name:s.status_name_en||s.status_name||"",status_name_mr:s.status_name_mr||"",description:s.description_en||s.description||"",description_mr:s.description_mr||"",display_order:s.display_order||"",is_active:s.is_active})}catch(s){console.error("Failed to fetch status",s),p.error("Failed to load status details"),u("/masters/application-statuses")}finally{_(!1)}})()},[g,c,t,u]);const f=async n=>{if(n.preventDefault(),!m.status_code||!m.status_name){p.error("Code and Name are required");return}x(!0);try{const s={...m};s.display_order&&(s.display_order=Number(s.display_order)),c?(await xt(g,s),p.success("Status updated successfully")):(await ht(s),p.success("Status created successfully")),u("/masters/application-statuses")}catch(s){console.error("Save failed",s),p.error(s.message||"Failed to save status")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/application-statuses"),leftIcon:e.jsx(U,{className:"h-4 w-4"}),children:"Back"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Status":c?"Edit Status":"Add New Status"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"Status Code",value:m.status_code,onChange:n=>d(s=>({...s,status_code:n.target.value})),placeholder:"DRAFT",required:!0,disabled:t||c}),e.jsx(z,{label:"Status Name",value:m.status_name,onChange:n=>d(s=>({...s,status_name:n.target.value})),valueMr:m.status_name_mr,onChangeMr:n=>d(s=>({...s,status_name_mr:n.target.value})),placeholder:"Draft",placeholderMr:"मसुदा",required:!0,disabled:t}),e.jsx(O,{label:"Display Order",type:"number",value:m.display_order,onChange:n=>d(s=>({...s,display_order:n.target.value})),placeholder:"1",disabled:t}),e.jsx(z,{label:"Description",value:m.description,onChange:n=>d(s=>({...s,description:n.target.value})),valueMr:m.description_mr,onChangeMr:n=>d(s=>({...s,description_mr:n.target.value})),placeholder:"Enter description...",placeholderMr:"मराठी वर्णन",isTextArea:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:n=>d(s=>({...s,is_active:n.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/application-statuses"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update":"Create"})]})]})})]})},Xt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await fe({page:_,limit:d,search:x,include_inactive:!0});g(i.educationLevels||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch education levels",i),p.error(i.message||"Failed to load education levels")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{await Promise.all(i.map(l=>gt(l.level_id))),p.success("Education level(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete education level")}},C=a.useMemo(()=>[{key:"level_code",header:"Code",sortable:!0},{key:"level_name",header:"Name (EN)",sortable:!0},{key:"display_order",header:"Display Order",sortable:!0},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/education-levels/view/${l.level_id}`),onEdit:()=>t(`/masters/education-levels/edit/${l.level_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.education_levels.view",editPermission:"masters.education_levels.edit",deletePermission:"masters.education_levels.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Education Levels",description:"Manage education levels master data",actionLabel:"Add Education Level",onAction:()=>t("/masters/education-levels/add"),permission:"masters.education_levels.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"level_id",headerClassName:"bg-slate-900 text-white",showRowNumbers:!0})]})},ue=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState([]),[f,n]=a.useState({level_code:"",level_name:"",level_name_mr:"",description:"",description_mr:"",display_order:"",document_type_id:"",is_active:!0});a.useEffect(()=>{(async()=>{try{const r=await V({include_inactive:!1});d(r.documentTypes||[])}catch(r){console.error("Failed to fetch document types",r),p.error("Failed to load document types")}})()},[]),a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const r=await _t(g);n({level_code:r.level_code||"",level_name:r.level_name_en||r.level_name||"",level_name_mr:r.level_name_mr||"",description:r.description_en||r.description||"",description_mr:r.description_mr||"",display_order:r.display_order||"",document_type_id:r.doc_type_id||"",is_active:r.is_active})}catch(r){console.error("Failed to fetch education level",r),p.error("Failed to load education level details"),u("/masters/education-levels")}finally{_(!1)}})()},[g,c,t,u]);const s=async o=>{if(o.preventDefault(),!f.level_code||!f.level_name){p.error("Code and Name are required");return}x(!0);try{const r={...f};if(r.display_order&&(r.display_order=Number(r.display_order),r.display_order<0)){p.error("Display Order cannot be negative"),x(!1);return}r.document_type_id===""||r.document_type_id===null?r.doc_type_id=null:r.doc_type_id=Number(r.document_type_id),delete r.document_type_id,c?(await ft(g,r),p.success("Education level updated successfully")):(await bt(r),p.success("Education level created successfully")),u("/masters/education-levels")}catch(r){console.error("Save failed",r),p.error(r.message||"Failed to save education level")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/education-levels"),leftIcon:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Education Level":c?"Edit Education Level":"Add New Education Level"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"Level Code",value:f.level_code,onChange:o=>n(r=>({...r,level_code:o.target.value})),placeholder:"GRADUATE",required:!0,disabled:t||c}),e.jsx(z,{label:"Level Name",value:f.level_name,onChange:o=>n(r=>({...r,level_name:o.target.value})),valueMr:f.level_name_mr,onChangeMr:o=>n(r=>({...r,level_name_mr:o.target.value})),placeholder:"Graduate (Bachelor's Degree)",placeholderMr:"पदवीधर",disabled:t,required:!0}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(O,{label:"Display Order",type:"number",value:f.display_order,onChange:o=>n(r=>({...r,display_order:o.target.value})),placeholder:"30",min:"0",required:!0,disabled:t})}),e.jsx(z,{label:"Description",value:f.description,onChange:o=>n(r=>({...r,description:o.target.value})),valueMr:f.description_mr,onChangeMr:o=>n(r=>({...r,description_mr:o.target.value})),placeholder:"Enter description...",placeholderMr:"मराठी वर्णन",isTextArea:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:o=>n(r=>({...r,is_active:o.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/education-levels"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update":"Create"})]})]})})]})},Zt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),o=a.useCallback(async()=>{y(!0);try{const b=await vt({page:_,limit:d,search:x,include_inactive:!0});g(b.categories||[]),s(b.pagination?.totalPages||1)}catch(b){console.error("Failed to fetch categories",b),p.error(b.message||"Failed to load categories")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{o()},[o]);const r=async b=>{if(!(!b||b.length===0))try{const C=b.map(i=>i.category_id);await Promise.all(C.map(i=>yt(i))),p.success("Category(s) deleted successfully"),o()}catch(C){console.error("Delete failed",C),p.error(C.message||"Failed to delete category")}},N=a.useMemo(()=>[{key:"category_code",header:"Code",sortable:!0},{key:"category_name_en",header:"Name (EN)",sortable:!0},{key:"category_name_mr",header:"Name (MR)",sortable:!0},{key:"is_active",header:"Status",render:b=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${b.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:b.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:b=>e.jsx(G,{onView:()=>t(`/masters/categories/view/${b.category_id}`),onEdit:()=>t(`/masters/categories/edit/${b.category_id}`),onDelete:()=>r([b]),viewPermission:"masters.categories.view",editPermission:"masters.categories.edit",deletePermission:"masters.categories.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Categories",description:"Manage category master data",actionLabel:"Add Category",onAction:()=>t("/masters/categories/add"),permission:"masters.categories.create"}),e.jsx(H,{columns:N,data:u,onSearch:S,showRowNumbers:!0,onDelete:r,pagination:{currentPage:_,totalPages:n,onPageChange:m,pageSize:d,onPageSizeChange:b=>{f(b),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"category_id",headerClassName:"bg-slate-900 text-white"})]})},pe=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(!1),[m,d]=a.useState({category_code:"",category_name:"",category_name_mr:"",description:"",description_mr:"",display_order:0,is_active:!0});a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const s=await jt(g);d({category_code:s.category_code||"",category_name:s.category_name||"",category_name_mr:s.category_name_mr||"",description:s.description||"",description_mr:s.description_mr||"",display_order:s.display_order||0,is_active:s.is_active!==void 0?s.is_active:!0})}catch(s){console.error("Failed to load category",s),p.error("Failed to load category details"),u("/masters/categories")}finally{_(!1)}})()},[g,c,t,u]);const f=async n=>{if(n.preventDefault(),!m.category_code||!m.category_name){p.error("Please fill in required fields");return}x(!0);try{const s={...m};c?(await Nt(g,s),p.success("Category updated successfully")):(await St(s),p.success("Category created successfully")),u("/masters/categories")}catch(s){console.error("Save failed",s),p.error(s.message||"Failed to save category")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/categories"),leftIcon:e.jsx(U,{className:"h-4 w-4 mr-2"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Category":c?"Edit Category":"Add New Category"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(O,{label:"Category Code ",value:m.category_code,onChange:n=>d(s=>({...s,category_code:n.target.value})),placeholder:"e.g. GEN, OBC",required:!0,disabled:t||c}),e.jsx(z,{label:"Category Name",value:m.category_name,onChange:n=>d(s=>({...s,category_name:n.target.value})),valueMr:m.category_name_mr,onChangeMr:n=>d(s=>({...s,category_name_mr:n.target.value})),placeholder:"General",placeholderMr:"सामान्य",disabled:t,required:!0})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(z,{label:"Description",value:m.description,onChange:n=>d(s=>({...s,description:n.target.value})),valueMr:m.description_mr,onChangeMr:n=>d(s=>({...s,description_mr:n.target.value})),placeholder:"Enter description...",placeholderMr:"मराठी वर्णन",isTextArea:!0,disabled:t})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:n=>d(s=>({...s,is_active:n.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/categories"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update":"Create"})]})]})})]})},Vt=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await Ne({page:_,limit:d,search:x,include_inactive:!0}),l=i?.domains||[],v=i?.pagination||{};g(l),s(v.totalPages||1),r(v.total??v.totalItems??0)}catch(i){console.error("Failed to fetch experience domains",i),p.error(i.message||"Failed to load experience domains")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{await Promise.all(i.map(l=>kt(l.domain_id))),p.success("Experience domain(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete experience domain")}},C=a.useMemo(()=>[{key:"domain_code",header:"Code",sortable:!0},{key:"domain_name",header:"Name (EN)",sortable:!0},{key:"domain_name_mr",header:"Name (MR)",sortable:!0},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/experience-domains/view/${l.domain_id}`),onEdit:()=>t(`/masters/experience-domains/edit/${l.domain_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:["masters.experience-domains.view","masters.experience_domains.view"],editPermission:["masters.experience-domains.update","masters.experience-domains.edit","masters.experience_domains.update","masters.experience_domains.edit"],deletePermission:["masters.experience-domains.delete","masters.experience_domains.delete"]})}],[t]);return console.log("Component state:",{experienceDomains:u,loading:c,page:_,limit:d,totalPages:n,totalItems:o}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Experience Domains",description:"Manage experience domains master data",actionLabel:"Add Experience Domain",onAction:()=>t("/masters/experience-domains/add"),permission:["masters.experience-domains.create","masters.experience_domains.create"]}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"domain_id",headerClassName:"bg-slate-900 text-white"})]})},xe=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState([]),[f,n]=a.useState({domain_code:"",domain_name:"",domain_name_mr:"",description:"",description_mr:"",display_order:"",document_type_id:"",is_active:!0});a.useEffect(()=>{(async()=>{try{const r=await V({include_inactive:!1});d(r.documentTypes||[])}catch(r){console.error("Failed to fetch document types",r),p.error("Failed to load document types")}})()},[]),a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const r=await Ct(g);n({domain_code:r.domain_code||"",domain_name:r.domain_name||"",domain_name_mr:r.domain_name_mr||"",description:r.description||"",description_mr:r.description_mr||"",display_order:r.display_order||"",document_type_id:r.doc_type_id||"",is_active:r.is_active})}catch(r){console.error("Failed to fetch experience domain",r),p.error("Failed to load experience domain details"),u("/masters/experience-domains")}finally{_(!1)}})()},[g,c,t,u]);const s=async o=>{if(o.preventDefault(),!f.domain_code||!f.domain_name){p.error("Code and Name are required");return}x(!0);try{const r={...f};r.display_order&&(r.display_order=Number(r.display_order)),r.document_type_id===""||r.document_type_id===null?r.doc_type_id=null:r.doc_type_id=Number(r.document_type_id),delete r.document_type_id,c?(await Dt(g,r),p.success("Experience domain updated successfully")):(await wt(r),p.success("Experience domain created successfully")),u("/masters/experience-domains")}catch(r){console.error("Save failed",r),p.error(r.message||"Failed to save experience domain")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/experience-domains"),leftIcon:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Experience Domain":c?"Edit Experience Domain":"Add New Experience Domain"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:s,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"Domain Code",value:f.domain_code,onChange:o=>n(r=>({...r,domain_code:o.target.value})),placeholder:"WOMEN_RELATED",required:!0,disabled:t||c}),e.jsx(z,{label:"Domain Name",value:f.domain_name,onChange:o=>n(r=>({...r,domain_name:o.target.value})),valueMr:f.domain_name_mr,onChangeMr:o=>n(r=>({...r,domain_name_mr:o.target.value})),placeholder:"Women Related Domain",placeholderMr:"महिला संबंधित क्षेत्र",disabled:t,required:!0}),e.jsx(z,{label:"Description",value:f.description,onChange:o=>n(r=>({...r,description:o.target.value})),valueMr:f.description_mr,onChangeMr:o=>n(r=>({...r,description_mr:o.target.value})),placeholder:"Experience in women empowerment...",placeholderMr:"महिला सक्षमीकरण...",isTextArea:!0,disabled:t}),e.jsx("div",{className:"grid grid-cols-2 gap-4"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:o=>n(r=>({...r,is_active:o.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/experience-domains"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update":"Create"})]})]})})]})},es=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const i=await Pt({page:_,limit:d,search:x,include_inactive:!0});g(i.skills||[]),s(i.pagination?.totalPages||1),r(i.pagination?.total??i.pagination?.totalItems??0)}catch(i){console.error("Failed to fetch skills",i),p.error(i.message||"Failed to load skills")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async i=>{if(!(!i||i.length===0))try{const l=i.map(v=>v.skill_id);await Promise.all(l.map(v=>Et(v))),p.success("Skill(s) deleted successfully"),N()}catch(l){console.error("Delete failed",l),p.error(l.message||"Failed to delete skill")}},C=a.useMemo(()=>[{key:"skill_name_en",header:"Name (EN)",sortable:!0,render:(i,l)=>l.skill_name_en||l.skill_name},{key:"skill_name_mr",header:"Name (MR)",sortable:!0},{key:"description",header:"Description (EN)",sortable:!1},{key:"description_mr",header:"Description (MR)",sortable:!1},{key:"is_active",header:"Status",render:(i,l)=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${l.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l.is_active?"Active":"Inactive"})},{key:"actions",header:"Actions",render:(i,l,v)=>e.jsx(G,{onView:()=>t(`/masters/skills/view/${l.skill_id}`),onEdit:()=>t(`/masters/skills/edit/${l.skill_id}`),onDelete:()=>v?.onDelete?.(),viewPermission:"masters.skills.view",editPermission:"masters.skills.edit",deletePermission:"masters.skills.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Skills",description:"Manage skills master data",actionLabel:"Add Skill",onAction:()=>t("/masters/skills/add"),permission:"masters.skills.create"}),e.jsx(H,{columns:C,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:i=>{f(i),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"skill_id",headerClassName:"bg-slate-900 text-white"})]})},he=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g,[y,x]=a.useState(!1),[S,_]=a.useState(c||t),[m,d]=a.useState({skill_name:"",skill_name_mr:"",description:"",description_mr:"",is_active:!0});a.useEffect(()=>{(c||t)&&(async()=>{_(!0);try{const s=await Lt(g);d({skill_name:s.skill_name_en||s.skill_name||"",skill_name_mr:s.skill_name_mr||"",description:s.description_en||s.description||"",description_mr:s.description_mr||"",is_active:s.is_active})}catch(s){console.error("Failed to fetch skill",s),p.error("Failed to load skill details"),u("/masters/skills")}finally{_(!1)}})()},[g,c,t,u]);const f=async n=>{if(n.preventDefault(),!m.skill_name){p.error("Skill Name is required");return}x(!0);try{c?(await Ft(g,m),p.success("Skill updated successfully")):(await At(m),p.success("Skill created successfully")),u("/masters/skills")}catch(s){console.error("Save failed",s),p.error(s.message||"Failed to save skill")}finally{x(!1)}};return S?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{variant:"ghost",onClick:()=>u("/masters/skills"),leftIcon:e.jsx(U,{className:"h-4 w-4 mr-2"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t?"View Skill":c?"Edit Skill":"Add New Skill"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(z,{label:"Skill Name",value:m.skill_name,onChange:n=>d(s=>({...s,skill_name:n.target.value})),valueMr:m.skill_name_mr,onChangeMr:n=>d(s=>({...s,skill_name_mr:n.target.value})),placeholder:"Enter skill name",placeholderMr:"कौशल्य",disabled:t,required:!0}),e.jsx(z,{label:"Description",value:m.description,onChange:n=>d(s=>({...s,description:n.target.value})),valueMr:m.description_mr,onChangeMr:n=>d(s=>({...s,description_mr:n.target.value})),placeholder:"Describe the skill...",placeholderMr:"कौशल्याचे वर्णन...",isTextArea:!0,disabled:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:n=>d(s=>({...s,is_active:n.target.checked})),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:t}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]})]}),!t&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/skills"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:y,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update Skill":"Create Skill"})]})]})})]})},ts=()=>{const t=q(),[u,g]=a.useState([]),[c,y]=a.useState(!0),[x,S]=a.useState(""),[_,m]=a.useState(1),[d,f]=a.useState(10),[n,s]=a.useState(1),[o,r]=a.useState(0),N=a.useCallback(async()=>{y(!0);try{const l=await Tt({page:_,limit:d,search:x,include_inactive:!0});g(l.banners||[]),s(l.pagination?.totalPages||1),r(l.pagination?.total??l.pagination?.totalItems??0)}catch(l){console.error("Failed to fetch banners",l),p.error(l.message||"Failed to load banners")}finally{y(!1)}},[_,d,x]);a.useEffect(()=>{N()},[N]);const b=async l=>{if(!(!l||l.length===0))try{await Promise.all(l.map(v=>It(v.banner_id))),p.success("Banner(s) deleted successfully"),N()}catch(v){console.error("Delete failed",v),p.error(v.message||"Failed to delete banner")}},C=async(l,v)=>{try{g(P=>P.map(L=>L.banner_id===l.banner_id?{...L,is_active:v}:L)),await Se(l.banner_id,{is_active:v}),p.success(`Banner ${v?"activated":"deactivated"} successfully`)}catch(P){console.error("Toggle active failed",P),p.error(P.message||"Failed to update status"),g(L=>L.map(I=>I.banner_id===l.banner_id?{...I,is_active:!v}:I))}},i=a.useMemo(()=>[{key:"banner_image_path",header:"Image (EN)",render:(l,v)=>v.banner_image_path?e.jsx(be,{src:`/${v.banner_image_path}`,alt:"Banner (English)",variant:"button",className:"inline-flex"}):e.jsx("span",{className:"text-xs text-slate-400",children:"No image"})},{key:"banner_image_path_mr",header:"Image (MR)",render:(l,v)=>v.banner_image_path_mr?e.jsx(be,{src:`/${v.banner_image_path_mr}`,alt:"Banner (Marathi)",variant:"button",className:"inline-flex"}):e.jsx("span",{className:"text-xs text-slate-400",children:"Not set"})},{key:"display_order",header:"Order",sortable:!0},{key:"is_active",header:"Status",className:"text-center",render:(l,v)=>e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Z,{permissions:"masters.banners.edit",children:e.jsx(zt,{checked:v.is_active,onCheckedChange:P=>C(v,P)})}),e.jsx("span",{className:`text-xs ${v.is_active?"text-green-600":"text-slate-500"}`,children:v.is_active?"Active":"Inactive"})]})},{key:"actions",header:"Actions",render:(l,v,P)=>e.jsx(G,{onView:()=>t(`/masters/banners/view/${v.banner_id}`),onEdit:()=>t(`/masters/banners/edit/${v.banner_id}`),onDelete:()=>P?.onDelete?.(),viewPermission:"masters.banners.view",editPermission:"masters.banners.edit",deletePermission:"masters.banners.delete"})}],[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Banners",description:"Manage banner images for the public site",actionLabel:"Add Banner",onAction:()=>t("/masters/banners/add"),permission:"masters.banners.create"}),e.jsx(H,{columns:i,data:u,onSearch:S,showRowNumbers:!0,onDelete:b,pagination:{currentPage:_,totalPages:n,totalItems:o,onPageChange:m,pageSize:d,onPageSizeChange:l=>{f(l),m(1)},pageSizeOptions:[10,25,50,100]},isLoading:c,rowKey:"banner_id",headerClassName:"bg-slate-900 text-white"})]})},ge=({isViewMode:t=!1})=>{const u=q(),{id:g}=R(),c=!!g&&!t,y=!!g&&t,[x,S]=a.useState({display_order:0,is_active:!0,banner_image:null,banner_image_mr:null}),[_,m]=a.useState(null),[d,f]=a.useState(!1),[n,s]=a.useState(c||y),[o,r]=a.useState(null),[N,b]=a.useState(null),C=a.useMemo(()=>P=>{if(!P)return null;if(/^https?:\/\//i.test(P))return P;const L=P.startsWith("/")?P.slice(1):P;return`${we}/${L}`},[]);a.useEffect(()=>{(async()=>{if(g){s(!0);try{const L=await qt(g);m(L),S({display_order:L.display_order??0,is_active:L.is_active??!0,banner_image:null,banner_image_mr:null})}catch(L){console.error("Failed to load banner",L),p.error(L.message||"Failed to load banner"),u("/masters/banners")}finally{s(!1)}}})()},[g,c,y,u]);const i=(P,L)=>{S(I=>({...I,[P]:L}))},l=(P,L)=>{const I=P.target.files?.[0];if(I){if(!I.type.match(/^image\/(jpeg|png)$/)){p.error("Only JPEG and PNG images are allowed");return}if(I.size>2*1024*1024){p.error("Image size must be less than 2MB");return}i(L,I);const D=new FileReader;D.onloadend=()=>{L==="banner_image"?r(D.result):b(D.result)},D.readAsDataURL(I)}},v=async P=>{if(P.preventDefault(),!c&&!x.banner_image){p.error("Banner image is required");return}try{f(!0),c?(await Se(g,x),p.success("Banner updated successfully")):(await $t(x),p.success("Banner created successfully")),u("/masters/banners")}catch(L){console.error("Save failed",L),p.error(L.message||"Failed to save banner")}finally{f(!1)}};return n?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 ml-[-10px]",children:[e.jsx(w,{onClick:()=>u("/masters/banners"),variant:"ghost",leftIcon:e.jsx(U,{className:"h-5 w-5"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:y?"View Banner":c?"Edit Banner":"Add New Banner"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx(O,{label:"Display Order",type:"number",value:x.display_order,onChange:P=>i("display_order",Number(P.target.value)),placeholder:"Enter display order (0 for first)",disabled:y}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:x.is_active,onChange:P=>i("is_active",P.target.checked),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 h-4 w-4",disabled:y}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active Status"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Banner Image (English) ",!c&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Upload banner image for English (JPEG/PNG, max 2MB)"}),!y&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Choose Image"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png",onChange:P=>l(P,"banner_image"),className:"hidden"})]}),x.banner_image&&e.jsx("span",{className:"text-sm text-slate-600",children:x.banner_image.name})]}),(o||_?.banner_image_path)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:o?"New Image Preview":"Current Image"}),e.jsx("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:o?e.jsx("img",{src:o,alt:"Banner preview",className:"max-w-full h-auto rounded"}):e.jsx("img",{src:C(_.banner_image_path),alt:"Current banner",className:"max-w-full h-auto rounded cursor-pointer",onClick:P=>{P.preventDefault();const L=C(_.banner_image_path);L&&window.open(L,"_blank")}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Banner Image (Marathi) ",e.jsx("span",{className:"text-slate-500 text-xs",children:"(Optional)"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Upload banner image for Marathi (JPEG/PNG, max 2MB)"}),!y&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Choose Image"})]}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png",onChange:P=>l(P,"banner_image_mr"),className:"hidden"})]}),x.banner_image_mr&&e.jsx("span",{className:"text-sm text-slate-600",children:x.banner_image_mr.name})]}),(N||_?.banner_image_path_mr)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:N?"New Image Preview":"Current Image"}),e.jsx("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:N?e.jsx("img",{src:N,alt:"Banner preview (Marathi)",className:"max-w-full h-auto rounded"}):e.jsx("img",{src:C(_.banner_image_path_mr),alt:"Current banner (Marathi)",className:"max-w-full h-auto rounded cursor-pointer",onClick:P=>{P.preventDefault();const L=C(_.banner_image_path_mr);L&&window.open(L,"_blank")}})})]})]})]}),!y&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-slate-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>u("/masters/banners"),children:"Cancel"}),e.jsx(w,{type:"submit",isLoading:d,leftIcon:e.jsx(Q,{className:"h-4 w-4"}),children:c?"Update Banner":"Create Banner"})]})]})})]})},gs=()=>e.jsxs(Pe,{children:[e.jsx(k,{path:"/",element:e.jsx(Ee,{to:"districts",replace:!0})}),e.jsx(k,{path:"districts",element:e.jsx(Ht,{})}),e.jsx(k,{path:"districts/add",element:e.jsx(re,{})}),e.jsx(k,{path:"districts/edit/:id",element:e.jsx(re,{})}),e.jsx(k,{path:"districts/view/:id",element:e.jsx(re,{isViewMode:!0})}),e.jsx(k,{path:"talukas",element:e.jsx(Ut,{})}),e.jsx(k,{path:"talukas/add",element:e.jsx(ie,{})}),e.jsx(k,{path:"talukas/edit/:id",element:e.jsx(ie,{})}),e.jsx(k,{path:"talukas/view/:id",element:e.jsx(ie,{isViewMode:!0})}),e.jsx(k,{path:"components",element:e.jsx(Qt,{})}),e.jsx(k,{path:"components/add",element:e.jsx(ne,{})}),e.jsx(k,{path:"components/edit/:id",element:e.jsx(ne,{})}),e.jsx(k,{path:"components/view/:id",element:e.jsx(ne,{isViewMode:!0})}),e.jsx(k,{path:"hubs",element:e.jsx(Gt,{})}),e.jsx(k,{path:"hubs/add",element:e.jsx(le,{})}),e.jsx(k,{path:"hubs/edit/:id",element:e.jsx(le,{})}),e.jsx(k,{path:"hubs/view/:id",element:e.jsx(le,{isViewMode:!0})}),e.jsx(k,{path:"departments",element:e.jsx(Kt,{})}),e.jsx(k,{path:"departments/add",element:e.jsx(ce,{})}),e.jsx(k,{path:"departments/edit/:id",element:e.jsx(ce,{})}),e.jsx(k,{path:"departments/view/:id",element:e.jsx(ce,{isViewMode:!0})}),e.jsx(k,{path:"posts",element:e.jsx(Wt,{})}),e.jsx(k,{path:"posts/add",element:e.jsx(oe,{})}),e.jsx(k,{path:"posts/edit/:id",element:e.jsx(oe,{})}),e.jsx(k,{path:"posts/view/:id",element:e.jsx(oe,{isViewMode:!0})}),e.jsx(k,{path:"document-types",element:e.jsx(Jt,{})}),e.jsx(k,{path:"document-types/add",element:e.jsx(de,{})}),e.jsx(k,{path:"document-types/edit/:id",element:e.jsx(de,{})}),e.jsx(k,{path:"document-types/view/:id",element:e.jsx(de,{isViewMode:!0})}),e.jsx(k,{path:"application-statuses",element:e.jsx(Yt,{})}),e.jsx(k,{path:"application-statuses/add",element:e.jsx(me,{})}),e.jsx(k,{path:"application-statuses/edit/:id",element:e.jsx(me,{})}),e.jsx(k,{path:"application-statuses/view/:id",element:e.jsx(me,{isViewMode:!0})}),e.jsx(k,{path:"education-levels",element:e.jsx(Xt,{})}),e.jsx(k,{path:"education-levels/add",element:e.jsx(ue,{})}),e.jsx(k,{path:"education-levels/edit/:id",element:e.jsx(ue,{})}),e.jsx(k,{path:"education-levels/view/:id",element:e.jsx(ue,{isViewMode:!0})}),e.jsx(k,{path:"categories",element:e.jsx(Zt,{})}),e.jsx(k,{path:"categories/add",element:e.jsx(pe,{})}),e.jsx(k,{path:"categories/edit/:id",element:e.jsx(pe,{})}),e.jsx(k,{path:"categories/view/:id",element:e.jsx(pe,{isViewMode:!0})}),e.jsx(k,{path:"experience-domains",element:e.jsx(Vt,{})}),e.jsx(k,{path:"experience-domains/add",element:e.jsx(xe,{})}),e.jsx(k,{path:"experience-domains/edit/:id",element:e.jsx(xe,{})}),e.jsx(k,{path:"experience-domains/view/:id",element:e.jsx(xe,{isViewMode:!0})}),e.jsx(k,{path:"skills",element:e.jsx(es,{})}),e.jsx(k,{path:"skills/add",element:e.jsx(he,{})}),e.jsx(k,{path:"skills/edit/:id",element:e.jsx(he,{})}),e.jsx(k,{path:"skills/view/:id",element:e.jsx(he,{isViewMode:!0})}),e.jsx(k,{path:"banners",element:e.jsx(ts,{})}),e.jsx(k,{path:"banners/add",element:e.jsx(ge,{})}),e.jsx(k,{path:"banners/edit/:id",element:e.jsx(ge,{})}),e.jsx(k,{path:"banners/view/:id",element:e.jsx(ge,{isViewMode:!0})})]});export{gs as default};
