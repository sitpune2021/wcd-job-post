import{c as w,j as e,X as K,B as _,A as ee,r as u,R as I,I as te,x as f}from"./index-f2aTh8Q9.js";import{C as se,u as ae,S as O}from"./useDebounce-CD3y76_H.js";import{T as re}from"./triangle-alert-0CRYubsC.js";const le=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ne=w("arrow-down",le);const ie=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],R=w("arrow-up",ie);const de=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ce=w("chevron-left",de);const oe=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],he=w("chevrons-left",oe);const xe=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],me=w("chevrons-right",xe);const ue=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fe=w("trash-2",ue),be=({currentPage:n,totalPages:r,onPageChange:N})=>{const p=(()=>{const l=[];if(r<=5)for(let s=1;s<=r;s++)l.push(s);else{l.push(1);let s=Math.max(2,n-1),h=Math.min(r-1,n+1);n<=3&&(h=4),n>=r-2&&(s=r-3),s>2&&l.push("...");for(let g=s;g<=h;g++)l.push(g);h<r-1&&l.push("..."),r>1&&l.push(r)}return l})(),c=l=>{const d=Math.min(Math.max(Number(l)||1,1),Math.max(r,1));d!==n&&N(d)};return e.jsxs("nav",{className:"flex items-center gap-1","aria-label":"Pagination",children:[e.jsx("button",{type:"button",onClick:()=>c(1),disabled:n===1,className:"hidden sm:inline-flex items-center justify-center w-9 h-9 rounded-lg border border-slate-300 bg-white text-slate-600 hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:border-slate-300 transition-all duration-200 shadow-sm",title:"First page",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>c(n-1),disabled:n===1,className:"inline-flex items-center justify-center w-9 h-9 rounded-lg border border-slate-300 bg-white text-slate-600 hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:border-slate-300 transition-all duration-200 shadow-sm",title:"Previous page",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[p.map((l,d)=>{if(l==="...")return e.jsx("span",{className:"inline-flex items-center justify-center w-9 h-9 text-slate-500",children:"..."},`ellipsis-${d}`);const s=Number(l)===Number(n);return e.jsx("button",{type:"button",onClick:()=>c(l),"aria-current":s?"page":void 0,className:`inline-flex items-center justify-center w-9 h-9 rounded-lg text-sm font-medium transition-all duration-200 ${s?"bg-blue-600 text-white border border-blue-600 shadow-sm hover:bg-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50 hover:border-slate-400 hidden sm:inline-flex shadow-sm"}`,children:l},l)}),e.jsxs("span",{className:"sm:hidden flex items-center justify-center px-2 text-sm text-slate-600 font-medium",children:[n," / ",r]})]}),e.jsx("button",{type:"button",onClick:()=>c(n+1),disabled:n===r,className:"inline-flex items-center justify-center w-9 h-9 rounded-lg border border-slate-300 bg-white text-slate-600 hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:border-slate-300 transition-all duration-200 shadow-sm",title:"Next page",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>c(r),disabled:n===r,className:"hidden sm:inline-flex items-center justify-center w-9 h-9 rounded-lg border border-slate-300 bg-white text-slate-600 hover:bg-slate-50 hover:border-slate-400 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:border-slate-300 transition-all duration-200 shadow-sm",title:"Last page",children:e.jsx(me,{className:"h-4 w-4"})})]})},pe=({isOpen:n,onClose:r,onConfirm:N,title:b="Confirm Action",message:p="Are you sure you want to proceed?",confirmLabel:c="Confirm",cancelLabel:l="Cancel",variant:d="danger",isLoading:s=!1})=>n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:[e.jsx("div",{className:"absolute inset-0",onClick:r,"aria-hidden":"true"}),e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 ring-1 ring-slate-900/5",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b border-slate-100 bg-slate-50/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2.5",children:[d==="danger"&&e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(re,{className:"h-5 w-5 text-red-600"})}),b]}),e.jsx("button",{onClick:r,className:"p-1 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(K,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-5 md:p-6",children:e.jsx("p",{className:"text-slate-600 leading-relaxed text-base",children:p})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-center justify-end gap-3 p-4 md:p-5 bg-slate-50 border-t border-slate-100",children:[e.jsx(_,{variant:"ghost",onClick:r,disabled:s,className:"w-full sm:w-auto",children:l}),e.jsx(_,{variant:d,onClick:N,isLoading:s,className:"w-full sm:w-auto shadow-sm",children:c})]})]})]}):null;function ye({columns:n,data:r,isLoading:N,onSearch:b,onSort:p,onDelete:c,deletePermission:l,onSelectionChange:d,pagination:s,rowKey:h="id",selectionResetKey:g,headerClassName:v,enableSelection:j=!0,showRowNumbers:M=!1,rowNumberHeader:q="Sr No.",extraHeaderContent:B,rowClassName:F=""}){const{hasPermission:Q}=ee(),[x,y]=u.useState(new Set),[k,H]=u.useState(null),[ge,je]=u.useState(""),[$,U]=u.useState(""),[X,D]=u.useState(!1),[z,A]=u.useState([]),T=u.useRef(!1),o=Array.isArray(r)?r:[],G=l?Q(l):!0,L=ae($,300);I.useEffect(()=>{if(b){if(!T.current){T.current=!0;return}b(L)}},[L,b]),I.useEffect(()=>{if(j&&d){const t=o.filter(a=>x.has(String(a[h])));d(t)}},[j,x,d]),I.useEffect(()=>{g!==void 0&&y(new Set)},[g]);const J=t=>{let a="asc";k&&k.key===t&&k.direction==="asc"&&(a="desc"),H({key:t,direction:a}),p&&p(t,a)},P=t=>{t.target.checked?y(new Set(o.map(a=>String(a[h])))):y(new Set)},W=t=>{const a=new Set(x),i=String(t);a.has(i)?a.delete(i):a.add(i),y(a)},E=t=>{A(Array.isArray(t)?t:[t]),D(!0)},Y=async()=>{c&&z.length>0&&(await c(z),y(new Set),A([])),D(!1)},Z=(j?1:0)+(M?1:0),V=n.length+Z;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-5 border-b border-slate-200 flex flex-col sm:flex-row justify-between gap-4 sm:items-center bg-white",children:[e.jsx("div",{className:"w-full sm:w-72",children:e.jsx(te,{placeholder:"Search...",value:$,onChange:t=>{U(t.target.value),s?.onPageChange&&s.onPageChange(1)},icon:e.jsx(O,{className:"w-4 h-4 text-slate-400"}),className:"shadow-sm"})}),e.jsxs("div",{className:"w-full sm:w-auto flex items-center gap-3 justify-between sm:justify-end flex-wrap",children:[B,j&&x.size>0&&G&&c&&e.jsxs(_,{variant:"danger",size:"sm",onClick:()=>E(o.filter(t=>x.has(String(t[h])))),leftIcon:e.jsx(fe,{className:"h-4 w-4"}),className:"shadow-sm",children:["Delete (",x.size,")"]})]})]}),e.jsx(pe,{isOpen:X,onClose:()=>{D(!1),A([])},onConfirm:Y,title:"Confirm Delete",message:`Are you sure you want to delete ${z.length} item(s)? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger"}),e.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:f("bg-slate-50/80",v),children:e.jsxs("tr",{children:[j&&e.jsx("th",{scope:"col",className:"px-6 py-4 text-left w-12",children:e.jsx("input",{type:"checkbox",className:f("rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer w-4 h-4 transition-all duration-200"),onChange:P,checked:o.length>0&&x.size===o.length})}),M&&e.jsx("th",{scope:"col",className:f("px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",v?.includes("bg-slate-900")||v?.includes("text-white")?"text-slate-300":"text-slate-500"),children:q}),n.map(t=>e.jsx("th",{scope:"col",className:f("px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider cursor-pointer transition-colors group select-none",v?.includes("bg-slate-900")||v?.includes("text-white")?"text-slate-300 hover:text-white":"text-slate-500 hover:bg-slate-100 hover:text-slate-700",t.className),onClick:()=>t.sortable&&J(t.key),children:e.jsxs("div",{className:f("flex items-center gap-1.5",t.className?.includes("text-center")&&"justify-center",t.className?.includes("text-right")&&"justify-end"),children:[t.header,k?.key===t.key?k.direction==="asc"?e.jsx(R,{className:"h-3.5 w-3.5 text-blue-600"}):e.jsx(ne,{className:"h-3.5 w-3.5 text-blue-600"}):t.sortable&&e.jsx(R,{className:"h-3.5 w-3.5 text-slate-300 opacity-0 group-hover:opacity-100 transition-opacity"})]})},String(t.key)))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:N?e.jsx("tr",{children:e.jsx("td",{colSpan:V,className:"px-6 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-3"}),e.jsx("p",{className:"text-sm font-medium",children:"Loading data..."})]})})}):o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:V,className:"px-6 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-100 flex items-center justify-center mb-3",children:e.jsx(O,{className:"h-6 w-6 text-slate-400"})}),e.jsx("p",{className:"text-base font-medium text-slate-900",children:"No records found"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Try adjusting your search or filters"})]})})}):o.map((t,a)=>{if(!t)return null;const i=t||{},S=String(i[h]),C=x.has(S);return e.jsxs("tr",{className:f("hover:bg-slate-50/80 transition-colors",C&&"bg-blue-50/40",F),children:[j&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer w-4 h-4 transition-all duration-200",checked:C,onChange:()=>W(S)})}),M&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 font-medium",children:s?(s.currentPage-1)*s.pageSize+a+1:a+1}),n.map(m=>e.jsx("td",{className:f("px-6 py-4 text-sm text-slate-700 align-top",m.className,m.className?.includes("text-right")&&"text-right",m.className?.includes("text-center")&&"text-center"),children:m.render?m.render(i[m.key],i,{onDelete:()=>E(i)}):i[m.key]??"-"},String(m.key)))]},S||`row-${a}`)})})]})}),s&&e.jsxs("div",{className:"bg-white px-4 md:px-6 py-4 border-t border-slate-200 flex flex-col-reverse sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-x-6 gap-y-2 text-sm text-slate-600 w-full sm:w-auto",children:[s.pageSizeOptions&&s.onPageSizeChange&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Rows per page:"}),e.jsx("select",{value:s.pageSize,onChange:t=>s.onPageSizeChange?.(Number(t.target.value)),className:"border border-slate-300 rounded-lg px-2 py-1.5 bg-white text-slate-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 cursor-pointer hover:border-slate-400 transition-colors",children:s.pageSizeOptions.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("span",{className:"text-center sm:text-left",children:(()=>{const t=s.pageSize||o.length||0,a=s.currentPage||1;let i=s.totalItems??s.total;i===void 0&&(i=(a-1)*t+o.length);const S=i===0?0:(a-1)*t+1,C=Math.min(a*t,i||a*t);return e.jsxs(e.Fragment,{children:["Showing ",e.jsx("span",{className:"font-medium text-slate-900",children:S})," to ",e.jsx("span",{className:"font-medium text-slate-900",children:C})," of ",e.jsx("span",{className:"font-medium text-slate-900",children:i})," results"]})})()})]}),e.jsx("div",{className:"w-full sm:w-auto flex justify-center sm:justify-end",children:e.jsx(be,{currentPage:s.currentPage,totalPages:s.totalPages,onPageChange:s.onPageChange||(()=>{})},`pagination-${s.currentPage}`)})]})]})}export{ye as D,fe as T};
