import{c as je,r as q,j as x,u as Qe,C as nr,F as tr,U as er,a as ut}from"./index-f2aTh8Q9.js";import{P as rr}from"./PageHeader-C1BYbgZ6.js";import{M as ir}from"./map-pin-Cchj0Rwk.js";import{F as ar}from"./funnel-DwcreGcV.js";import"./plus-CEVaGo_4.js";const or=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sr=je("arrow-right",or);const lr=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ur=je("chart-column",lr);function qn(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function cr(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Ee(n){let t,r,e;n.length!==2?(t=qn,r=(a,h)=>qn(n(a),h),e=(a,h)=>n(a)-h):(t=n===qn||n===cr?n:fr,r=n,e=n);function i(a,h,c=0,l=a.length){if(c<l){if(t(h,h)!==0)return l;do{const u=c+l>>>1;r(a[u],h)<0?c=u+1:l=u}while(c<l)}return c}function o(a,h,c=0,l=a.length){if(c<l){if(t(h,h)!==0)return l;do{const u=c+l>>>1;r(a[u],h)<=0?c=u+1:l=u}while(c<l)}return c}function s(a,h,c=0,l=a.length){const u=i(a,h,c,l-1);return u>c&&e(a[u-1],h)>-e(a[u],h)?u-1:u}return{left:i,center:s,right:o}}function fr(){return 0}function hr(n){return n===null?NaN:+n}const dr=Ee(qn),pr=dr.right;Ee(hr).center;class sn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let e=0;for(let i=0;i<this._n&&i<32;i++){const o=r[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(r[e++]=a),t=s}return r[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let r=this._n,e,i,o,s=0;if(r>0){for(s=t[--r];r>0&&(e=s,i=t[--r],s=e+i,o=i-(s-e),!o););r>0&&(o<0&&t[r-1]<0||o>0&&t[r-1]>0)&&(i=o*2,e=s+i,i==e-s&&(s=e))}return s}}const gr=Math.sqrt(50),mr=Math.sqrt(10),xr=Math.sqrt(2);function Gn(n,t,r){const e=(t-n)/Math.max(0,r),i=Math.floor(Math.log10(e)),o=e/Math.pow(10,i),s=o>=gr?10:o>=mr?5:o>=xr?2:1;let a,h,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(n*c),h=Math.round(t*c),a/c<n&&++a,h/c>t&&--h,c=-c):(c=Math.pow(10,i)*s,a=Math.round(n/c),h=Math.round(t/c),a*c<n&&++a,h*c>t&&--h),h<a&&.5<=r&&r<2?Gn(n,t,r*2):[a,h,c]}function vr(n,t,r){if(t=+t,n=+n,r=+r,!(r>0))return[];if(n===t)return[n];const e=t<n,[i,o,s]=e?Gn(t,n,r):Gn(n,t,r);if(!(o>=i))return[];const a=o-i+1,h=new Array(a);if(e)if(s<0)for(let c=0;c<a;++c)h[c]=(o-c)/-s;else for(let c=0;c<a;++c)h[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)h[c]=(i+c)/-s;else for(let c=0;c<a;++c)h[c]=(i+c)*s;return h}function ct(n,t,r){return t=+t,n=+n,r=+r,Gn(n,t,r)[2]}function yr(n,t,r){t=+t,n=+n,r=+r;const e=t<n,i=e?ct(t,n,r):ct(n,t,r);return(e?-1:1)*(i<0?1/-i:i)}function*br(n){for(const t of n)yield*t}function _e(n){return Array.from(br(n))}var I=1e-6,C=Math.PI,O=C/2,zt=C/4,Y=C*2,X=180/C,B=C/180,z=Math.abs,$e=Math.atan,Sn=Math.atan2,D=Math.cos,wr=Math.exp,Nr=Math.log,H=Math.sin,Mr=Math.sign||function(n){return n>0?1:n<0?-1:0},un=Math.sqrt,Sr=Math.tan;function jr(n){return n>1?0:n<-1?C:Math.acos(n)}function jn(n){return n>1?O:n<-1?-O:Math.asin(n)}function V(){}function On(n,t){n&&Dt.hasOwnProperty(n.type)&&Dt[n.type](n,t)}var Ft={Feature:function(n,t){On(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,e=-1,i=r.length;++e<i;)On(r[e].geometry,t)}},Dt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)n=r[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){ft(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)ft(r[e],t,0)},Polygon:function(n,t){Ht(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)Ht(r[e],t)},GeometryCollection:function(n,t){for(var r=n.geometries,e=-1,i=r.length;++e<i;)On(r[e],t)}};function ft(n,t,r){var e=-1,i=n.length-r,o;for(t.lineStart();++e<i;)o=n[e],t.point(o[0],o[1],o[2]);t.lineEnd()}function Ht(n,t){var r=-1,e=n.length;for(t.polygonStart();++r<e;)ft(n[r],t,1);t.polygonEnd()}function fn(n,t){n&&Ft.hasOwnProperty(n.type)?Ft[n.type](n,t):On(n,t)}function ht(n){return[Sn(n[1],n[0]),jn(n[2])]}function gn(n){var t=n[0],r=n[1],e=D(r);return[e*D(t),e*H(t),H(r)]}function Cn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Kn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function rt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Ln(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function dt(n){var t=un(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function pt(n,t){function r(e,i){return e=n(e,i),t(e[0],e[1])}return n.invert&&t.invert&&(r.invert=function(e,i){return e=t.invert(e,i),e&&n.invert(e[0],e[1])}),r}function gt(n,t){return z(n)>C&&(n-=Math.round(n/Y)*Y),[n,t]}gt.invert=gt;function ke(n,t,r){return(n%=Y)?t||r?pt(Bt(n),Gt(t,r)):Bt(n):t||r?Gt(t,r):gt}function qt(n){return function(t,r){return t+=n,z(t)>C&&(t-=Math.round(t/Y)*Y),[t,r]}}function Bt(n){var t=qt(n);return t.invert=qt(-n),t}function Gt(n,t){var r=D(n),e=H(n),i=D(t),o=H(t);function s(a,h){var c=D(h),l=D(a)*c,u=H(a)*c,f=H(h),d=f*r+l*e;return[Sn(u*i-d*o,l*r-f*e),jn(d*i+u*o)]}return s.invert=function(a,h){var c=D(h),l=D(a)*c,u=H(a)*c,f=H(h),d=f*i-u*o;return[Sn(u*i+f*o,l*r+d*e),jn(d*r-l*e)]},s}function Er(n){n=ke(n[0]*B,n[1]*B,n.length>2?n[2]*B:0);function t(r){return r=n(r[0]*B,r[1]*B),r[0]*=X,r[1]*=X,r}return t.invert=function(r){return r=n.invert(r[0]*B,r[1]*B),r[0]*=X,r[1]*=X,r},t}function _r(n,t,r,e,i,o){if(r){var s=D(t),a=H(t),h=e*r;i==null?(i=t+e*Y,o=t-h/2):(i=Ot(s,i),o=Ot(s,o),(e>0?i<o:i>o)&&(i+=e*Y));for(var c,l=i;e>0?l>o:l<o;l-=h)c=ht([s,-a*D(l),-a*H(l)]),n.point(c[0],c[1])}}function Ot(n,t){t=gn(t),t[0]-=n,dt(t);var r=jr(-t[1]);return((-t[2]<0?-r:r)+Y-I)%Y}function Pe(){var n=[],t;return{point:function(r,e,i){t.push([r,e,i])},lineStart:function(){n.push(t=[])},lineEnd:V,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function Bn(n,t){return z(n[0]-t[0])<I&&z(n[1]-t[1])<I}function In(n,t,r,e){this.x=n,this.z=t,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function Ae(n,t,r,e,i){var o=[],s=[],a,h;if(n.forEach(function(p){if(!((N=p.length-1)<=0)){var N,m=p[0],b=p[N],M;if(Bn(m,b)){if(!m[2]&&!b[2]){for(i.lineStart(),a=0;a<N;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}b[0]+=2*I}o.push(M=new In(m,p,null,!0)),s.push(M.o=new In(m,null,M,!1)),o.push(M=new In(b,p,null,!1)),s.push(M.o=new In(b,null,M,!0))}}),!!o.length){for(s.sort(t),Kt(o),Kt(s),a=0,h=s.length;a<h;++a)s[a].e=r=!r;for(var c=o[0],l,u;;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,h=l.length;a<h;++a)i.point((u=l[a])[0],u[1]);else e(f.x,f.n.x,1,i);f=f.n}else{if(d)for(l=f.p.z,a=l.length-1;a>=0;--a)i.point((u=l[a])[0],u[1]);else e(f.x,f.p.x,-1,i);f=f.p}f=f.o,l=f.z,d=!d}while(!f.v);i.lineEnd()}}}function Kt(n){if(t=n.length){for(var t,r=0,e=n[0],i;++r<t;)e.n=i=n[r],i.p=e,e=i;e.n=i=n[0],i.p=e}}function it(n){return z(n[0])<=C?n[0]:Mr(n[0])*((z(n[0])+C)%Y-C)}function $r(n,t){var r=it(t),e=t[1],i=H(e),o=[H(r),-D(r),0],s=0,a=0,h=new sn;i===1?e=O+I:i===-1&&(e=-O-I);for(var c=0,l=n.length;c<l;++c)if(f=(u=n[c]).length)for(var u,f,d=u[f-1],p=it(d),N=d[1]/2+zt,m=H(N),b=D(N),M=0;M<f;++M,p=j,m=w,b=_,d=S){var S=u[M],j=it(S),v=S[1]/2+zt,w=H(v),_=D(v),E=j-p,$=E>=0?1:-1,R=$*E,y=R>C,L=m*w;if(h.add(Sn(L*$*H(R),b*_+L*D(R))),s+=y?E+$*Y:E,y^p>=r^j>=r){var A=Kn(gn(d),gn(S));dt(A);var P=Kn(o,A);dt(P);var g=(y^E>=0?-1:1)*jn(P[2]);(e>g||e===g&&(A[0]||A[1]))&&(a+=y^E>=0?1:-1)}}return(s<-I||s<I&&h<-1e-12)^a&1}function Re(n,t,r,e){return function(i){var o=t(i),s=Pe(),a=t(s),h=!1,c,l,u,f={point:d,lineStart:N,lineEnd:m,polygonStart:function(){f.point=b,f.lineStart=M,f.lineEnd=S,l=[],c=[]},polygonEnd:function(){f.point=d,f.lineStart=N,f.lineEnd=m,l=_e(l);var j=$r(c,e);l.length?(h||(i.polygonStart(),h=!0),Ae(l,Pr,j,r,i)):j&&(h||(i.polygonStart(),h=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),l=c=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(j,v){n(j,v)&&i.point(j,v)}function p(j,v){o.point(j,v)}function N(){f.point=p,o.lineStart()}function m(){f.point=d,o.lineEnd()}function b(j,v){u.push([j,v]),a.point(j,v)}function M(){a.lineStart(),u=[]}function S(){b(u[0][0],u[0][1]),a.lineEnd();var j=a.clean(),v=s.result(),w,_=v.length,E,$,R;if(u.pop(),c.push(u),u=null,!!_){if(j&1){if($=v[0],(E=$.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),w=0;w<E;++w)i.point((R=$[w])[0],R[1]);i.lineEnd()}return}_>1&&j&2&&v.push(v.pop().concat(v.shift())),l.push(v.filter(kr))}}return f}}function kr(n){return n.length>1}function Pr(n,t){return((n=n.x)[0]<0?n[1]-O-I:O-n[1])-((t=t.x)[0]<0?t[1]-O-I:O-t[1])}const Xt=Re(function(){return!0},Ar,Cr,[-C,-O]);function Ar(n){var t=NaN,r=NaN,e=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var a=o>0?C:-C,h=z(o-t);z(h-C)<I?(n.point(t,r=(r+s)/2>0?O:-O),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(o,r),i=0):e!==a&&h>=C&&(z(t-e)<I&&(t-=e*I),z(o-a)<I&&(o-=a*I),r=Rr(t,r,o,s),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(a,r),i=0),n.point(t=o,r=s),e=a},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function Rr(n,t,r,e){var i,o,s=H(n-r);return z(s)>I?$e((H(t)*(o=D(e))*H(r)-H(e)*(i=D(t))*H(n))/(i*o*s)):(t+e)/2}function Cr(n,t,r,e){var i;if(n==null)i=r*O,e.point(-C,i),e.point(0,i),e.point(C,i),e.point(C,0),e.point(C,-i),e.point(0,-i),e.point(-C,-i),e.point(-C,0),e.point(-C,i);else if(z(n[0]-t[0])>I){var o=n[0]<t[0]?C:-C;i=r*o/2,e.point(-o,i),e.point(0,i),e.point(o,i)}else e.point(t[0],t[1])}function Lr(n){var t=D(n),r=2*B,e=t>0,i=z(t)>I;function o(l,u,f,d){_r(d,n,r,f,l,u)}function s(l,u){return D(l)*D(u)>t}function a(l){var u,f,d,p,N;return{lineStart:function(){p=d=!1,N=1},point:function(m,b){var M=[m,b],S,j=s(m,b),v=e?j?0:c(m,b):j?c(m+(m<0?C:-C),b):0;if(!u&&(p=d=j)&&l.lineStart(),j!==d&&(S=h(u,M),(!S||Bn(u,S)||Bn(M,S))&&(M[2]=1)),j!==d)N=0,j?(l.lineStart(),S=h(M,u),l.point(S[0],S[1])):(S=h(u,M),l.point(S[0],S[1],2),l.lineEnd()),u=S;else if(i&&u&&e^j){var w;!(v&f)&&(w=h(M,u,!0))&&(N=0,e?(l.lineStart(),l.point(w[0][0],w[0][1]),l.point(w[1][0],w[1][1]),l.lineEnd()):(l.point(w[1][0],w[1][1]),l.lineEnd(),l.lineStart(),l.point(w[0][0],w[0][1],3)))}j&&(!u||!Bn(u,M))&&l.point(M[0],M[1]),u=M,d=j,f=v},lineEnd:function(){d&&l.lineEnd(),u=null},clean:function(){return N|(p&&d)<<1}}}function h(l,u,f){var d=gn(l),p=gn(u),N=[1,0,0],m=Kn(d,p),b=Cn(m,m),M=m[0],S=b-M*M;if(!S)return!f&&l;var j=t*b/S,v=-t*M/S,w=Kn(N,m),_=Ln(N,j),E=Ln(m,v);rt(_,E);var $=w,R=Cn(_,$),y=Cn($,$),L=R*R-y*(Cn(_,_)-1);if(!(L<0)){var A=un(L),P=Ln($,(-R-A)/y);if(rt(P,_),P=ht(P),!f)return P;var g=l[0],k=u[0],T=l[1],G=u[1],F;k<g&&(F=g,g=k,k=F);var vn=k-g,nn=z(vn-C)<I,rn=nn||vn<I;if(!nn&&G<T&&(F=T,T=G,G=F),rn?nn?T+G>0^P[1]<(z(P[0]-g)<I?T:G):T<=P[1]&&P[1]<=G:vn>C^(g<=P[0]&&P[0]<=k)){var tn=Ln($,(-R+A)/y);return rt(tn,_),[P,ht(tn)]}}}function c(l,u){var f=e?n:C-n,d=0;return l<-f?d|=1:l>f&&(d|=2),u<-f?d|=4:u>f&&(d|=8),d}return Re(s,a,o,e?[0,-n]:[-C,n-C])}function Ir(n,t,r,e,i,o){var s=n[0],a=n[1],h=t[0],c=t[1],l=0,u=1,f=h-s,d=c-a,p;if(p=r-s,!(!f&&p>0)){if(p/=f,f<0){if(p<l)return;p<u&&(u=p)}else if(f>0){if(p>u)return;p>l&&(l=p)}if(p=i-s,!(!f&&p<0)){if(p/=f,f<0){if(p>u)return;p>l&&(l=p)}else if(f>0){if(p<l)return;p<u&&(u=p)}if(p=e-a,!(!d&&p>0)){if(p/=d,d<0){if(p<l)return;p<u&&(u=p)}else if(d>0){if(p>u)return;p>l&&(l=p)}if(p=o-a,!(!d&&p<0)){if(p/=d,d<0){if(p>u)return;p>l&&(l=p)}else if(d>0){if(p<l)return;p<u&&(u=p)}return l>0&&(n[0]=s+l*f,n[1]=a+l*d),u<1&&(t[0]=s+u*f,t[1]=a+u*d),!0}}}}}var yn=1e9,Tn=-yn;function Tr(n,t,r,e){function i(c,l){return n<=c&&c<=r&&t<=l&&l<=e}function o(c,l,u,f){var d=0,p=0;if(c==null||(d=s(c,u))!==(p=s(l,u))||h(c,l)<0^u>0)do f.point(d===0||d===3?n:r,d>1?e:t);while((d=(d+u+4)%4)!==p);else f.point(l[0],l[1])}function s(c,l){return z(c[0]-n)<I?l>0?0:3:z(c[0]-r)<I?l>0?2:1:z(c[1]-t)<I?l>0?1:0:l>0?3:2}function a(c,l){return h(c.x,l.x)}function h(c,l){var u=s(c,1),f=s(l,1);return u!==f?u-f:u===0?l[1]-c[1]:u===1?c[0]-l[0]:u===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,u=Pe(),f,d,p,N,m,b,M,S,j,v,w,_={point:E,lineStart:L,lineEnd:A,polygonStart:R,polygonEnd:y};function E(g,k){i(g,k)&&l.point(g,k)}function $(){for(var g=0,k=0,T=d.length;k<T;++k)for(var G=d[k],F=1,vn=G.length,nn=G[0],rn,tn,Rn=nn[0],cn=nn[1];F<vn;++F)rn=Rn,tn=cn,nn=G[F],Rn=nn[0],cn=nn[1],tn<=e?cn>e&&(Rn-rn)*(e-tn)>(cn-tn)*(n-rn)&&++g:cn<=e&&(Rn-rn)*(e-tn)<(cn-tn)*(n-rn)&&--g;return g}function R(){l=u,f=[],d=[],w=!0}function y(){var g=$(),k=w&&g,T=(f=_e(f)).length;(k||T)&&(c.polygonStart(),k&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),T&&Ae(f,a,g,o,c),c.polygonEnd()),l=c,f=d=p=null}function L(){_.point=P,d&&d.push(p=[]),v=!0,j=!1,M=S=NaN}function A(){f&&(P(N,m),b&&j&&u.rejoin(),f.push(u.result())),_.point=E,j&&l.lineEnd()}function P(g,k){var T=i(g,k);if(d&&p.push([g,k]),v)N=g,m=k,b=T,v=!1,T&&(l.lineStart(),l.point(g,k));else if(T&&j)l.point(g,k);else{var G=[M=Math.max(Tn,Math.min(yn,M)),S=Math.max(Tn,Math.min(yn,S))],F=[g=Math.max(Tn,Math.min(yn,g)),k=Math.max(Tn,Math.min(yn,k))];Ir(G,F,n,t,r,e)?(j||(l.lineStart(),l.point(G[0],G[1])),l.point(F[0],F[1]),T||l.lineEnd(),w=!1):T&&(l.lineStart(),l.point(g,k),w=!1)}M=g,S=k,j=T}return _}}const mt=n=>n;var at=new sn,xt=new sn,Ce,Le,vt,yt,en={point:V,lineStart:V,lineEnd:V,polygonStart:function(){en.lineStart=zr,en.lineEnd=Dr},polygonEnd:function(){en.lineStart=en.lineEnd=en.point=V,at.add(z(xt)),xt=new sn},result:function(){var n=at/2;return at=new sn,n}};function zr(){en.point=Fr}function Fr(n,t){en.point=Ie,Ce=vt=n,Le=yt=t}function Ie(n,t){xt.add(yt*n-vt*t),vt=n,yt=t}function Dr(){Ie(Ce,Le)}var mn=1/0,Xn=mn,En=-mn,Yn=En,Un={point:Hr,lineStart:V,lineEnd:V,polygonStart:V,polygonEnd:V,result:function(){var n=[[mn,Xn],[En,Yn]];return En=Yn=-(Xn=mn=1/0),n}};function Hr(n,t){n<mn&&(mn=n),n>En&&(En=n),t<Xn&&(Xn=t),t>Yn&&(Yn=t)}var bt=0,wt=0,bn=0,Vn=0,Zn=0,hn=0,Nt=0,Mt=0,wn=0,Te,ze,W,J,U={point:ln,lineStart:Yt,lineEnd:Ut,polygonStart:function(){U.lineStart=Gr,U.lineEnd=Or},polygonEnd:function(){U.point=ln,U.lineStart=Yt,U.lineEnd=Ut},result:function(){var n=wn?[Nt/wn,Mt/wn]:hn?[Vn/hn,Zn/hn]:bn?[bt/bn,wt/bn]:[NaN,NaN];return bt=wt=bn=Vn=Zn=hn=Nt=Mt=wn=0,n}};function ln(n,t){bt+=n,wt+=t,++bn}function Yt(){U.point=qr}function qr(n,t){U.point=Br,ln(W=n,J=t)}function Br(n,t){var r=n-W,e=t-J,i=un(r*r+e*e);Vn+=i*(W+n)/2,Zn+=i*(J+t)/2,hn+=i,ln(W=n,J=t)}function Ut(){U.point=ln}function Gr(){U.point=Kr}function Or(){Fe(Te,ze)}function Kr(n,t){U.point=Fe,ln(Te=W=n,ze=J=t)}function Fe(n,t){var r=n-W,e=t-J,i=un(r*r+e*e);Vn+=i*(W+n)/2,Zn+=i*(J+t)/2,hn+=i,i=J*n-W*t,Nt+=i*(W+n),Mt+=i*(J+t),wn+=i*3,ln(W=n,J=t)}function De(n){this._context=n}De.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,Y);break}}},result:V};var St=new sn,ot,He,qe,Nn,Mn,_n={point:V,lineStart:function(){_n.point=Xr},lineEnd:function(){ot&&Be(He,qe),_n.point=V},polygonStart:function(){ot=!0},polygonEnd:function(){ot=null},result:function(){var n=+St;return St=new sn,n}};function Xr(n,t){_n.point=Be,He=Nn=n,qe=Mn=t}function Be(n,t){Nn-=n,Mn-=t,St.add(un(Nn*Nn+Mn*Mn)),Nn=n,Mn=t}let Vt,Wn,Zt,Wt;class Jt{constructor(t){this._append=t==null?Ge:Yr(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==Zt||this._append!==Wn){const e=this._radius,i=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Zt=e,Wn=this._append,Wt=this._,this._=i}this._+=Wt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Ge(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function Yr(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Ge;if(t!==Vt){const r=10**t;Vt=t,Wn=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*r)/r+i[o]}}return Wn}function Ur(n,t){let r=3,e=4.5,i,o;function s(a){return a&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),fn(a,i(o))),o.result()}return s.area=function(a){return fn(a,i(en)),en.result()},s.measure=function(a){return fn(a,i(_n)),_n.result()},s.bounds=function(a){return fn(a,i(Un)),Un.result()},s.centroid=function(a){return fn(a,i(U)),U.result()},s.projection=function(a){return arguments.length?(i=a==null?(n=null,mt):(n=a).stream,s):n},s.context=function(a){return arguments.length?(o=a==null?(t=null,new Jt(r)):new De(t=a),typeof e!="function"&&o.pointRadius(e),s):t},s.pointRadius=function(a){return arguments.length?(e=typeof a=="function"?a:(o.pointRadius(+a),+a),s):e},s.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{const h=Math.floor(a);if(!(h>=0))throw new RangeError(`invalid digits: ${a}`);r=h}return t===null&&(o=new Jt(r)),s},s.projection(n).digits(r).context(t)}function kt(n){return function(t){var r=new jt;for(var e in n)r[e]=n[e];return r.stream=t,r}}function jt(){}jt.prototype={constructor:jt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Pt(n,t,r){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),fn(r,n.stream(Un)),t(Un.result()),e!=null&&n.clipExtent(e),n}function Oe(n,t,r){return Pt(n,function(e){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),a=+t[0][0]+(i-s*(e[1][0]+e[0][0]))/2,h=+t[0][1]+(o-s*(e[1][1]+e[0][1]))/2;n.scale(150*s).translate([a,h])},r)}function Vr(n,t,r){return Oe(n,[[0,0],t],r)}function Zr(n,t,r){return Pt(n,function(e){var i=+t,o=i/(e[1][0]-e[0][0]),s=(i-o*(e[1][0]+e[0][0]))/2,a=-o*e[0][1];n.scale(150*o).translate([s,a])},r)}function Wr(n,t,r){return Pt(n,function(e){var i=+t,o=i/(e[1][1]-e[0][1]),s=-o*e[0][0],a=(i-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([s,a])},r)}var Qt=16,Jr=D(30*B);function ne(n,t){return+t?ni(n,t):Qr(n)}function Qr(n){return kt({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function ni(n,t){function r(e,i,o,s,a,h,c,l,u,f,d,p,N,m){var b=c-e,M=l-i,S=b*b+M*M;if(S>4*t&&N--){var j=s+f,v=a+d,w=h+p,_=un(j*j+v*v+w*w),E=jn(w/=_),$=z(z(w)-1)<I||z(o-u)<I?(o+u)/2:Sn(v,j),R=n($,E),y=R[0],L=R[1],A=y-e,P=L-i,g=M*A-b*P;(g*g/S>t||z((b*A+M*P)/S-.5)>.3||s*f+a*d+h*p<Jr)&&(r(e,i,o,s,a,h,y,L,$,j/=_,v/=_,w,N,m),m.point(y,L),r(y,L,$,j,v,w,c,l,u,f,d,p,N,m))}}return function(e){var i,o,s,a,h,c,l,u,f,d,p,N,m={point:b,lineStart:M,lineEnd:j,polygonStart:function(){e.polygonStart(),m.lineStart=v},polygonEnd:function(){e.polygonEnd(),m.lineStart=M}};function b(E,$){E=n(E,$),e.point(E[0],E[1])}function M(){u=NaN,m.point=S,e.lineStart()}function S(E,$){var R=gn([E,$]),y=n(E,$);r(u,f,l,d,p,N,u=y[0],f=y[1],l=E,d=R[0],p=R[1],N=R[2],Qt,e),e.point(u,f)}function j(){m.point=b,e.lineEnd()}function v(){M(),m.point=w,m.lineEnd=_}function w(E,$){S(i=E,$),o=u,s=f,a=d,h=p,c=N,m.point=S}function _(){r(u,f,l,d,p,N,o,s,i,a,h,c,Qt,e),m.lineEnd=j,j()}return m}}var ti=kt({point:function(n,t){this.stream.point(n*B,t*B)}});function ei(n){return kt({point:function(t,r){var e=n(t,r);return this.stream.point(e[0],e[1])}})}function ri(n,t,r,e,i){function o(s,a){return s*=e,a*=i,[t+n*s,r-n*a]}return o.invert=function(s,a){return[(s-t)/n*e,(r-a)/n*i]},o}function te(n,t,r,e,i,o){if(!o)return ri(n,t,r,e,i);var s=D(o),a=H(o),h=s*n,c=a*n,l=s/n,u=a/n,f=(a*r-s*t)/n,d=(a*t+s*r)/n;function p(N,m){return N*=e,m*=i,[h*N-c*m+t,r-c*N-h*m]}return p.invert=function(N,m){return[e*(l*N-u*m+f),i*(d-u*N-l*m)]},p}function ii(n){return ai(function(){return n})()}function ai(n){var t,r=150,e=480,i=250,o=0,s=0,a=0,h=0,c=0,l,u=0,f=1,d=1,p=null,N=Xt,m=null,b,M,S,j=mt,v=.5,w,_,E,$,R;function y(g){return E(g[0]*B,g[1]*B)}function L(g){return g=E.invert(g[0],g[1]),g&&[g[0]*X,g[1]*X]}y.stream=function(g){return $&&R===g?$:$=ti(ei(l)(N(w(j(R=g)))))},y.preclip=function(g){return arguments.length?(N=g,p=void 0,P()):N},y.postclip=function(g){return arguments.length?(j=g,m=b=M=S=null,P()):j},y.clipAngle=function(g){return arguments.length?(N=+g?Lr(p=g*B):(p=null,Xt),P()):p*X},y.clipExtent=function(g){return arguments.length?(j=g==null?(m=b=M=S=null,mt):Tr(m=+g[0][0],b=+g[0][1],M=+g[1][0],S=+g[1][1]),P()):m==null?null:[[m,b],[M,S]]},y.scale=function(g){return arguments.length?(r=+g,A()):r},y.translate=function(g){return arguments.length?(e=+g[0],i=+g[1],A()):[e,i]},y.center=function(g){return arguments.length?(o=g[0]%360*B,s=g[1]%360*B,A()):[o*X,s*X]},y.rotate=function(g){return arguments.length?(a=g[0]%360*B,h=g[1]%360*B,c=g.length>2?g[2]%360*B:0,A()):[a*X,h*X,c*X]},y.angle=function(g){return arguments.length?(u=g%360*B,A()):u*X},y.reflectX=function(g){return arguments.length?(f=g?-1:1,A()):f<0},y.reflectY=function(g){return arguments.length?(d=g?-1:1,A()):d<0},y.precision=function(g){return arguments.length?(w=ne(_,v=g*g),P()):un(v)},y.fitExtent=function(g,k){return Oe(y,g,k)},y.fitSize=function(g,k){return Vr(y,g,k)},y.fitWidth=function(g,k){return Zr(y,g,k)},y.fitHeight=function(g,k){return Wr(y,g,k)};function A(){var g=te(r,0,0,f,d,u).apply(null,t(o,s)),k=te(r,e-g[0],i-g[1],f,d,u);return l=ke(a,h,c),_=pt(t,k),E=pt(l,_),w=ne(_,v),P()}function P(){return $=R=null,y}return function(){return t=n.apply(this,arguments),y.invert=t.invert&&L,A()}}function At(n,t){return[n,Nr(Sr((O+t)/2))]}At.invert=function(n,t){return[n,2*$e(wr(t))-O]};function oi(){return si(At).scale(961/Y)}function si(n){var t=ii(n),r=t.center,e=t.scale,i=t.translate,o=t.clipExtent,s=null,a,h,c;t.scale=function(u){return arguments.length?(e(u),l()):e()},t.translate=function(u){return arguments.length?(i(u),l()):i()},t.center=function(u){return arguments.length?(r(u),l()):r()},t.clipExtent=function(u){return arguments.length?(u==null?s=a=h=c=null:(s=+u[0][0],a=+u[0][1],h=+u[1][0],c=+u[1][1]),l()):s==null?null:[[s,a],[h,c]]};function l(){var u=C*e(),f=t(Er(t.rotate()).invert([0,0]));return o(s==null?[[f[0]-u,f[1]-u],[f[0]+u,f[1]+u]]:n===At?[[Math.max(f[0]-u,s),a],[Math.min(f[0]+u,h),c]]:[[s,Math.max(f[1]-u,a)],[h,Math.min(f[1]+u,c)]])}return l()}function li(n){return n}function ui(n){if(n==null)return li;var t,r,e=n.scale[0],i=n.scale[1],o=n.translate[0],s=n.translate[1];return function(a,h){h||(t=r=0);var c=2,l=a.length,u=new Array(l);for(u[0]=(t+=a[0])*e+o,u[1]=(r+=a[1])*i+s;c<l;)u[c]=a[c],++c;return u}}function ci(n,t){for(var r,e=n.length,i=e-t;i<--e;)r=n[i],n[i++]=n[e],n[e]=r}function fi(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return ee(n,r)})}:ee(n,t)}function ee(n,t){var r=t.id,e=t.bbox,i=t.properties==null?{}:t.properties,o=Rt(n,t);return r==null&&e==null?{type:"Feature",properties:i,geometry:o}:e==null?{type:"Feature",id:r,properties:i,geometry:o}:{type:"Feature",id:r,bbox:e,properties:i,geometry:o}}function Rt(n,t){var r=ui(n.transform),e=n.arcs;function i(l,u){u.length&&u.pop();for(var f=e[l<0?~l:l],d=0,p=f.length;d<p;++d)u.push(r(f[d],d));l<0&&ci(u,p)}function o(l){return r(l)}function s(l){for(var u=[],f=0,d=l.length;f<d;++f)i(l[f],u);return u.length<2&&u.push(u[0]),u}function a(l){for(var u=s(l);u.length<4;)u.push(u[0]);return u}function h(l){return l.map(a)}function c(l){var u=l.type,f;switch(u){case"GeometryCollection":return{type:u,geometries:l.geometries.map(c)};case"Point":f=o(l.coordinates);break;case"MultiPoint":f=l.coordinates.map(o);break;case"LineString":f=s(l.arcs);break;case"MultiLineString":f=l.arcs.map(s);break;case"Polygon":f=h(l.arcs);break;case"MultiPolygon":f=l.arcs.map(h);break;default:return null}return{type:u,coordinates:f}}return c(t)}function hi(n,t){var r={},e={},i={},o=[],s=-1;t.forEach(function(c,l){var u=n.arcs[c<0?~c:c],f;u.length<3&&!u[1][0]&&!u[1][1]&&(f=t[++s],t[s]=c,t[l]=f)}),t.forEach(function(c){var l=a(c),u=l[0],f=l[1],d,p;if(d=i[u])if(delete i[d.end],d.push(c),d.end=f,p=e[f]){delete e[p.start];var N=p===d?d:d.concat(p);e[N.start=d.start]=i[N.end=p.end]=N}else e[d.start]=i[d.end]=d;else if(d=e[f])if(delete e[d.start],d.unshift(c),d.start=u,p=i[u]){delete i[p.end];var m=p===d?d:p.concat(d);e[m.start=p.start]=i[m.end=d.end]=m}else e[d.start]=i[d.end]=d;else d=[c],e[d.start=u]=i[d.end=f]=d});function a(c){var l=n.arcs[c<0?~c:c],u=l[0],f;return n.transform?(f=[0,0],l.forEach(function(d){f[0]+=d[0],f[1]+=d[1]})):f=l[l.length-1],c<0?[f,u]:[u,f]}function h(c,l){for(var u in c){var f=c[u];delete l[f.start],delete f.start,delete f.end,f.forEach(function(d){r[d<0?~d:d]=1}),o.push(f)}}return h(i,e),h(e,i),t.forEach(function(c){r[c<0?~c:c]||o.push([c])}),o}function di(n){for(var t=-1,r=n.length,e,i=n[r-1],o=0;++t<r;)e=i,i=n[t],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}function pi(n){return Rt(n,gi.apply(this,arguments))}function gi(n,t){var r={},e=[],i=[];t.forEach(o);function o(h){switch(h.type){case"GeometryCollection":h.geometries.forEach(o);break;case"Polygon":s(h.arcs);break;case"MultiPolygon":h.arcs.forEach(s);break}}function s(h){h.forEach(function(c){c.forEach(function(l){(r[l=l<0?~l:l]||(r[l]=[])).push(h)})}),e.push(h)}function a(h){return di(Rt(n,{type:"Polygon",arcs:[h]}).coordinates[0])}return e.forEach(function(h){if(!h._){var c=[],l=[h];for(h._=1,i.push(c);h=l.pop();)c.push(h),h.forEach(function(u){u.forEach(function(f){r[f<0?~f:f].forEach(function(d){d._||(d._=1,l.push(d))})})})}}),e.forEach(function(h){delete h._}),{type:"MultiPolygon",arcs:i.map(function(h){var c=[],l;if(h.forEach(function(N){N.forEach(function(m){m.forEach(function(b){r[b<0?~b:b].length<2&&c.push(b)})})}),c=hi(n,c),(l=c.length)>1)for(var u=1,f=a(c[0]),d,p;u<l;++u)(d=a(c[u]))>f&&(p=c[0],c[0]=c[u],c[u]=p,f=d);return c}).filter(function(h){return h.length>0})}}function mi(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function Ct(n,t,r){n.prototype=t.prototype=r,r.constructor=n}function Ke(n,t){var r=Object.create(n.prototype);for(var e in t)r[e]=t[e];return r}function An(){}var $n=.7,Jn=1/$n,pn="\\s*([+-]?\\d+)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Q="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xi=/^#([0-9a-f]{3,8})$/,vi=new RegExp(`^rgb\\(${pn},${pn},${pn}\\)$`),yi=new RegExp(`^rgb\\(${Q},${Q},${Q}\\)$`),bi=new RegExp(`^rgba\\(${pn},${pn},${pn},${kn}\\)$`),wi=new RegExp(`^rgba\\(${Q},${Q},${Q},${kn}\\)$`),Ni=new RegExp(`^hsl\\(${kn},${Q},${Q}\\)$`),Mi=new RegExp(`^hsla\\(${kn},${Q},${Q},${kn}\\)$`),re={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ct(An,Pn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:ie,formatHex:ie,formatHex8:Si,formatHsl:ji,formatRgb:ae,toString:ae});function ie(){return this.rgb().formatHex()}function Si(){return this.rgb().formatHex8()}function ji(){return Xe(this).formatHsl()}function ae(){return this.rgb().formatRgb()}function Pn(n){var t,r;return n=(n+"").trim().toLowerCase(),(t=xi.exec(n))?(r=t[1].length,t=parseInt(t[1],16),r===6?oe(t):r===3?new K(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?zn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?zn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vi.exec(n))?new K(t[1],t[2],t[3],1):(t=yi.exec(n))?new K(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bi.exec(n))?zn(t[1],t[2],t[3],t[4]):(t=wi.exec(n))?zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ni.exec(n))?ue(t[1],t[2]/100,t[3]/100,1):(t=Mi.exec(n))?ue(t[1],t[2]/100,t[3]/100,t[4]):re.hasOwnProperty(n)?oe(re[n]):n==="transparent"?new K(NaN,NaN,NaN,0):null}function oe(n){return new K(n>>16&255,n>>8&255,n&255,1)}function zn(n,t,r,e){return e<=0&&(n=t=r=NaN),new K(n,t,r,e)}function Ei(n){return n instanceof An||(n=Pn(n)),n?(n=n.rgb(),new K(n.r,n.g,n.b,n.opacity)):new K}function Et(n,t,r,e){return arguments.length===1?Ei(n):new K(n,t,r,e??1)}function K(n,t,r,e){this.r=+n,this.g=+t,this.b=+r,this.opacity=+e}Ct(K,Et,Ke(An,{brighter(n){return n=n==null?Jn:Math.pow(Jn,n),new K(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?$n:Math.pow($n,n),new K(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new K(on(this.r),on(this.g),on(this.b),Qn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:se,formatHex:se,formatHex8:_i,formatRgb:le,toString:le}));function se(){return`#${an(this.r)}${an(this.g)}${an(this.b)}`}function _i(){return`#${an(this.r)}${an(this.g)}${an(this.b)}${an((isNaN(this.opacity)?1:this.opacity)*255)}`}function le(){const n=Qn(this.opacity);return`${n===1?"rgb(":"rgba("}${on(this.r)}, ${on(this.g)}, ${on(this.b)}${n===1?")":`, ${n})`}`}function Qn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function on(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function an(n){return n=on(n),(n<16?"0":"")+n.toString(16)}function ue(n,t,r,e){return e<=0?n=t=r=NaN:r<=0||r>=1?n=t=NaN:t<=0&&(n=NaN),new Z(n,t,r,e)}function Xe(n){if(n instanceof Z)return new Z(n.h,n.s,n.l,n.opacity);if(n instanceof An||(n=Pn(n)),!n)return new Z;if(n instanceof Z)return n;n=n.rgb();var t=n.r/255,r=n.g/255,e=n.b/255,i=Math.min(t,r,e),o=Math.max(t,r,e),s=NaN,a=o-i,h=(o+i)/2;return a?(t===o?s=(r-e)/a+(r<e)*6:r===o?s=(e-t)/a+2:s=(t-r)/a+4,a/=h<.5?o+i:2-o-i,s*=60):a=h>0&&h<1?0:s,new Z(s,a,h,n.opacity)}function $i(n,t,r,e){return arguments.length===1?Xe(n):new Z(n,t,r,e??1)}function Z(n,t,r,e){this.h=+n,this.s=+t,this.l=+r,this.opacity=+e}Ct(Z,$i,Ke(An,{brighter(n){return n=n==null?Jn:Math.pow(Jn,n),new Z(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?$n:Math.pow($n,n),new Z(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,e=r+(r<.5?r:1-r)*t,i=2*r-e;return new K(st(n>=240?n-240:n+120,i,e),st(n,i,e),st(n<120?n+240:n-120,i,e),this.opacity)},clamp(){return new Z(ce(this.h),Fn(this.s),Fn(this.l),Qn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Qn(this.opacity);return`${n===1?"hsl(":"hsla("}${ce(this.h)}, ${Fn(this.s)*100}%, ${Fn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function ce(n){return n=(n||0)%360,n<0?n+360:n}function Fn(n){return Math.max(0,Math.min(1,n||0))}function st(n,t,r){return(n<60?t+(r-t)*n/60:n<180?r:n<240?t+(r-t)*(240-n)/60:t)*255}const Lt=n=>()=>n;function ki(n,t){return function(r){return n+r*t}}function Pi(n,t,r){return n=Math.pow(n,r),t=Math.pow(t,r)-n,r=1/r,function(e){return Math.pow(n+e*t,r)}}function Ai(n){return(n=+n)==1?Ye:function(t,r){return r-t?Pi(t,r,n):Lt(isNaN(t)?r:t)}}function Ye(n,t){var r=t-n;return r?ki(n,r):Lt(isNaN(n)?t:n)}const fe=(function n(t){var r=Ai(t);function e(i,o){var s=r((i=Et(i)).r,(o=Et(o)).r),a=r(i.g,o.g),h=r(i.b,o.b),c=Ye(i.opacity,o.opacity);return function(l){return i.r=s(l),i.g=a(l),i.b=h(l),i.opacity=c(l),i+""}}return e.gamma=n,e})(1);function Ri(n,t){t||(t=[]);var r=n?Math.min(t.length,n.length):0,e=t.slice(),i;return function(o){for(i=0;i<r;++i)e[i]=n[i]*(1-o)+t[i]*o;return e}}function Ci(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Li(n,t){var r=t?t.length:0,e=n?Math.min(r,n.length):0,i=new Array(e),o=new Array(r),s;for(s=0;s<e;++s)i[s]=It(n[s],t[s]);for(;s<r;++s)o[s]=t[s];return function(a){for(s=0;s<e;++s)o[s]=i[s](a);return o}}function Ii(n,t){var r=new Date;return n=+n,t=+t,function(e){return r.setTime(n*(1-e)+t*e),r}}function nt(n,t){return n=+n,t=+t,function(r){return n*(1-r)+t*r}}function Ti(n,t){var r={},e={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?r[i]=It(n[i],t[i]):e[i]=t[i];return function(o){for(i in r)e[i]=r[i](o);return e}}var _t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lt=new RegExp(_t.source,"g");function zi(n){return function(){return n}}function Fi(n){return function(t){return n(t)+""}}function Di(n,t){var r=_t.lastIndex=lt.lastIndex=0,e,i,o,s=-1,a=[],h=[];for(n=n+"",t=t+"";(e=_t.exec(n))&&(i=lt.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(e=e[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,h.push({i:s,x:nt(e,i)})),r=lt.lastIndex;return r<t.length&&(o=t.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?h[0]?Fi(h[0].x):zi(t):(t=h.length,function(c){for(var l=0,u;l<t;++l)a[(u=h[l]).i]=u.x(c);return a.join("")})}function It(n,t){var r=typeof t,e;return t==null||r==="boolean"?Lt(t):(r==="number"?nt:r==="string"?(e=Pn(t))?(t=e,fe):Di:t instanceof Pn?fe:t instanceof Date?Ii:Ci(t)?Ri:Array.isArray(t)?Li:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ti:nt)(n,t)}function Hi(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function qi(n){return function(){return n}}function Bi(n){return+n}var he=[0,1];function dn(n){return n}function $t(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:qi(isNaN(t)?NaN:.5)}function Gi(n,t){var r;return n>t&&(r=n,n=t,t=r),function(e){return Math.max(n,Math.min(t,e))}}function Oi(n,t,r){var e=n[0],i=n[1],o=t[0],s=t[1];return i<e?(e=$t(i,e),o=r(s,o)):(e=$t(e,i),o=r(o,s)),function(a){return o(e(a))}}function Ki(n,t,r){var e=Math.min(n.length,t.length)-1,i=new Array(e),o=new Array(e),s=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<e;)i[s]=$t(n[s],n[s+1]),o[s]=r(t[s],t[s+1]);return function(a){var h=pr(n,a,1,e)-1;return o[h](i[h](a))}}function Xi(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Yi(){var n=he,t=he,r=It,e,i,o,s=dn,a,h,c;function l(){var f=Math.min(n.length,t.length);return s!==dn&&(s=Gi(n[0],n[f-1])),a=f>2?Ki:Oi,h=c=null,u}function u(f){return f==null||isNaN(f=+f)?o:(h||(h=a(n.map(e),t,r)))(e(s(f)))}return u.invert=function(f){return s(i((c||(c=a(t,n.map(e),nt)))(f)))},u.domain=function(f){return arguments.length?(n=Array.from(f,Bi),l()):n.slice()},u.range=function(f){return arguments.length?(t=Array.from(f),l()):t.slice()},u.rangeRound=function(f){return t=Array.from(f),r=Hi,l()},u.clamp=function(f){return arguments.length?(s=f?!0:dn,l()):s!==dn},u.interpolate=function(f){return arguments.length?(r=f,l()):r},u.unknown=function(f){return arguments.length?(o=f,u):o},function(f,d){return e=f,i=d,l()}}function Ui(){return Yi()(dn,dn)}function Vi(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function tt(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,e=n.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+n.slice(r+1)]}function xn(n){return n=tt(Math.abs(n)),n?n[1]:NaN}function Zi(n,t){return function(r,e){for(var i=r.length,o=[],s=0,a=n[0],h=0;i>0&&a>0&&(h+a+1>e&&(a=Math.max(1,e-h)),o.push(r.substring(i-=a,i+a)),!((h+=a+1)>e));)a=n[s=(s+1)%n.length];return o.reverse().join(t)}}function Wi(n){return function(t){return t.replace(/[0-9]/g,function(r){return n[+r]})}}var Ji=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function et(n){if(!(t=Ji.exec(n)))throw new Error("invalid format: "+n);var t;return new Tt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}et.prototype=Tt.prototype;function Tt(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Tt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qi(n){n:for(var t=n.length,r=1,e=-1,i;r<t;++r)switch(n[r]){case".":e=i=r;break;case"0":e===0&&(e=r),i=r;break;default:if(!+n[r])break n;e>0&&(e=0);break}return e>0?n.slice(0,e)+n.slice(i+1):n}var Ue;function na(n,t){var r=tt(n,t);if(!r)return n+"";var e=r[0],i=r[1],o=i-(Ue=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=e.length;return o===s?e:o>s?e+new Array(o-s+1).join("0"):o>0?e.slice(0,o)+"."+e.slice(o):"0."+new Array(1-o).join("0")+tt(n,Math.max(0,t+o-1))[0]}function de(n,t){var r=tt(n,t);if(!r)return n+"";var e=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")}const pe={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Vi,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>de(n*100,t),r:de,s:na,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function ge(n){return n}var me=Array.prototype.map,xe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ta(n){var t=n.grouping===void 0||n.thousands===void 0?ge:Zi(me.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",e=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?ge:Wi(me.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",h=n.nan===void 0?"NaN":n.nan+"";function c(u){u=et(u);var f=u.fill,d=u.align,p=u.sign,N=u.symbol,m=u.zero,b=u.width,M=u.comma,S=u.precision,j=u.trim,v=u.type;v==="n"?(M=!0,v="g"):pe[v]||(S===void 0&&(S=12),j=!0,v="g"),(m||f==="0"&&d==="=")&&(m=!0,f="0",d="=");var w=N==="$"?r:N==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_=N==="$"?e:/[%p]/.test(v)?s:"",E=pe[v],$=/[defgprs%]/.test(v);S=S===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function R(y){var L=w,A=_,P,g,k;if(v==="c")A=E(y)+A,y="";else{y=+y;var T=y<0||1/y<0;if(y=isNaN(y)?h:E(Math.abs(y),S),j&&(y=Qi(y)),T&&+y==0&&p!=="+"&&(T=!1),L=(T?p==="("?p:a:p==="-"||p==="("?"":p)+L,A=(v==="s"?xe[8+Ue/3]:"")+A+(T&&p==="("?")":""),$){for(P=-1,g=y.length;++P<g;)if(k=y.charCodeAt(P),48>k||k>57){A=(k===46?i+y.slice(P+1):y.slice(P))+A,y=y.slice(0,P);break}}}M&&!m&&(y=t(y,1/0));var G=L.length+y.length+A.length,F=G<b?new Array(b-G+1).join(f):"";switch(M&&m&&(y=t(F+y,F.length?b-A.length:1/0),F=""),d){case"<":y=L+y+A+F;break;case"=":y=L+F+y+A;break;case"^":y=F.slice(0,G=F.length>>1)+L+y+A+F.slice(G);break;default:y=F+L+y+A;break}return o(y)}return R.toString=function(){return u+""},R}function l(u,f){var d=c((u=et(u),u.type="f",u)),p=Math.max(-8,Math.min(8,Math.floor(xn(f)/3)))*3,N=Math.pow(10,-p),m=xe[8+p/3];return function(b){return d(N*b)+m}}return{format:c,formatPrefix:l}}var Dn,Ve,Ze;ea({thousands:",",grouping:[3],currency:["$",""]});function ea(n){return Dn=ta(n),Ve=Dn.format,Ze=Dn.formatPrefix,Dn}function ra(n){return Math.max(0,-xn(Math.abs(n)))}function ia(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xn(t)/3)))*3-xn(Math.abs(n)))}function aa(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,xn(t)-xn(n))+1}function oa(n,t,r,e){var i=yr(n,t,r),o;switch(e=et(e??",f"),e.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(t));return e.precision==null&&!isNaN(o=ia(i,s))&&(e.precision=o),Ze(e,s)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(o=aa(i,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=o-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(o=ra(i))&&(e.precision=o-(e.type==="%")*2);break}}return Ve(e)}function sa(n){var t=n.domain;return n.ticks=function(r){var e=t();return vr(e[0],e[e.length-1],r??10)},n.tickFormat=function(r,e){var i=t();return oa(i[0],i[i.length-1],r??10,e)},n.nice=function(r){r==null&&(r=10);var e=t(),i=0,o=e.length-1,s=e[i],a=e[o],h,c,l=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);l-- >0;){if(c=ct(s,a,r),c===h)return e[i]=s,e[o]=a,t(e);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;h=c}return n},n}function We(){var n=Ui();return n.copy=function(){return Xi(n,We())},mi.apply(n,arguments),sa(n)}const la={aurangabad:"chatrapati shambhaji nagar","chhatrapati sambhajinagar":"chatrapati shambhaji nagar",sambhajinagar:"chatrapati shambhaji nagar",osmanabad:"dharashiv",ahmednagar:"ahilyanagar",bombay:"mumbai","bombay city":"mumbai","bombay suburban":"mumbai","mumbai suburban":"mumbai","mumbai sub":"mumbai","mumbai city":"mumbai","mumbai city district":"mumbai","mumbai suburban district":"mumbai","mumbai district":"mumbai",mumbai:"mumbai",bid:"beed",yavatmal:"yawatmal","thane district":"thane"},ua={akola:"Amravati",amravati:"Amravati",buldhana:"Amravati",washim:"Amravati",yawatmal:"Amravati","chatrapati shambhaji nagar":"Aurangabad",beed:"Aurangabad",hingoli:"Aurangabad",jalna:"Aurangabad",latur:"Aurangabad",nanded:"Aurangabad",dharashiv:"Aurangabad",parbhani:"Aurangabad",mumbai:"Konkan",palghar:"Konkan",raigad:"Konkan",ratnagiri:"Konkan",sindhudurg:"Konkan",thane:"Konkan",bhandara:"Nagpur",chandrapur:"Nagpur",gadchiroli:"Nagpur",gondia:"Nagpur",nagpur:"Nagpur",wardha:"Nagpur",ahilyanagar:"Nashik",dhule:"Nashik",jalgaon:"Nashik",nandurbar:"Nashik",nashik:"Nashik",kolhapur:"Pune",pune:"Pune",sangli:"Pune",satara:"Pune",solapur:"Pune"},ve={Amravati:20,Aurangabad:60,Konkan:140,Nagpur:180,Nashik:240,Pune:300},ye=["Konkan","Pune","Nashik","Aurangabad","Amravati","Nagpur"],Je=(n="")=>n.toLowerCase().trim().replace(/\s+/g," "),be=(n="")=>n.split(/\s+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),we=(n="")=>{const t=Je(n);return la[t]||t},Ne=n=>{const t=n.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},ca=({r:n,g:t,b:r})=>"#"+[n,t,r].map(e=>{const i=e.toString(16);return i.length===1?"0"+i:i}).join(""),Me=(n,t,r)=>{const e=Ne(n),i=Ne(t),o=(s,a)=>Math.round(s+(a-s)*r);return ca({r:o(e.r,i.r),g:o(e.g,i.g),b:o(e.b,i.b)})},Se=(n,t,r)=>{const e=t*Math.min(r,100-r)/1e4,i=o=>{const s=(o+n/30)%12,a=r-e*Math.max(Math.min(s-3,9-s,1),-1)*100;return Math.round(a*2.55).toString(16).padStart(2,"0")};return`#${i(0)}${i(8)}${i(4)}`},fa=({summaryData:n=[],onDistrictSelect:t,selectedDistrictName:r})=>{const[e,i]=q.useState([]),[o,s]=q.useState(null),[a,h]=q.useState({show:!1,x:0,y:0,content:null}),[c,l]=q.useState(null);q.useEffect(()=>{fetch("/maps/maharashtra.topo.json").then(v=>v.json()).then(v=>{const w=fi(v,v.objects.districts);i(w.features);const _=pi(v,v.objects.districts.geometries);s(_)}).catch(v=>console.error("Failed to load map topology:",v))},[]);const u=q.useMemo(()=>{const v={};return n.forEach(w=>{const _=we(w.district_name);_&&(v[_]||(v[_]={district_name:be(_),application_count:0,post_count:0}),v[_].application_count+=w.application_count??0,v[_].post_count+=w.post_count??0)}),v},[n]),f=v=>we(v),{path:d,viewBox:p}=q.useMemo(()=>{if(e.length===0)return{path:null,viewBox:"0 0 800 600"};const v=[800,600],w=oi().fitSize(v,{type:"FeatureCollection",features:e});return{path:Ur().projection(w),viewBox:`0 0 ${v[0]} ${v[1]}`}},[e]),N=q.useMemo(()=>{const v={},w={};return e.forEach(_=>{const E=f(_.properties.district),$=ua[E]||"Unknown";w[$]||(w[$]=[]),w[$].includes(E)||w[$].push(E)}),Object.keys(w).forEach(_=>{const E=w[_].sort(),$=E.length,R=ve[_]||0,y=30;E.forEach((L,A)=>{const P=$>1?(A/($-1)-.5)*y:0,g=(R+P+360)%360;v[L]=Se(g,70,55)})}),v},[e]),m=q.useMemo(()=>ye.reduce((v,w)=>(v[w]=Se(ve[w],70,55),v),{}),[]),{intensityScale:b,maxMetric:M}=q.useMemo(()=>{const v=n.map(E=>E.application_count??E.post_count??0),w=Math.max(...v,1);return{intensityScale:We().domain([0,w]).range([.08,1]).clamp(!0),maxMetric:w}},[n]),S=(v,w,_,E)=>{l(E),h({show:!0,x:v.clientX,y:v.clientY,content:{name:w,posts:_?.post_count||0,apps:_?.application_count||0}})},j=()=>{l(null),h(v=>({...v,show:!1}))};return!e.length||!d?x.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px] text-slate-400",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),x.jsx("div",{children:"Loading Map..."})]})}):x.jsxs("div",{className:"relative w-full h-full min-h-[400px] bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl overflow-hidden border border-slate-200 shadow-lg",children:[x.jsxs("svg",{width:"100%",height:"100%",viewBox:p,preserveAspectRatio:"xMidYMid meet",className:"drop-shadow-md",children:[x.jsx("defs",{children:x.jsxs("filter",{id:"glow",children:[x.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),x.jsxs("feMerge",{children:[x.jsx("feMergeNode",{in:"coloredBlur"}),x.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),x.jsx("g",{className:"districts",children:e.map((v,w)=>{const _=v.properties.district,E=f(_),$=u[E],R=r&&Je(r)===E,y=c===E,L=$?.district_name||be(_),A=$?.application_count??$?.post_count??0,P=N[E]||"#94a3b8",g=b(A);let k=Me("#ffffff",P,g);return(y||R)&&(k=Me(k,P,.4)),R&&(k="#2563eb"),x.jsx("path",{d:d(v),className:"transition-all duration-300 cursor-pointer outline-none",style:{fill:k,stroke:"#1e293b",strokeWidth:y||R?"2.5":"1.2",strokeLinejoin:"round",filter:R?"url(#glow)":"none",opacity:1},onClick:()=>t&&t($||{district_id:null,district_name:L,post_count:0,application_count:0}),onMouseMove:T=>S(T,L,$,E),onMouseLeave:j},`path-${w}`)})}),o&&x.jsx("path",{d:d(o),fill:"none",stroke:"#0f172a",strokeWidth:"1.8",strokeLinejoin:"round",className:"pointer-events-none"})]}),x.jsxs("div",{className:"absolute bottom-4 right-4 bg-white/95 backdrop-blur-md px-4 py-3 rounded-lg shadow-lg border border-slate-200 max-w-[200px]",children:[x.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Divisions"}),x.jsx("div",{className:"space-y-1.5",children:ye.map(v=>x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-4 h-4 rounded border border-slate-300",style:{backgroundColor:m[v]}}),x.jsx("span",{className:"text-xs text-slate-600",children:v})]},v))})]}),a.show&&a.content&&x.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:`${a.x}px`,top:`${a.y-10}px`,transform:"translate(-50%, -100%)"},children:x.jsxs("div",{className:"bg-slate-900 text-white px-4 py-3 rounded-lg shadow-2xl border border-slate-700 backdrop-blur-sm",children:[x.jsx("div",{className:"font-semibold text-sm mb-2 text-slate-100",children:a.content.name}),x.jsxs("div",{className:"space-y-1 text-xs",children:[x.jsxs("div",{className:"flex items-center justify-between gap-6",children:[x.jsx("span",{className:"text-slate-300",children:"Posts:"}),x.jsx("span",{className:"font-mono font-medium text-blue-300",children:a.content.posts.toLocaleString()})]}),x.jsxs("div",{className:"flex items-center justify-between gap-6",children:[x.jsx("span",{className:"text-slate-300",children:"Applications:"}),x.jsx("span",{className:"font-mono font-medium text-emerald-300",children:a.content.apps.toLocaleString()})]}),M>0&&x.jsxs("div",{className:"pt-2 mt-2 border-t border-slate-700 text-[10px] text-slate-400",children:["Activity: ",Math.round(a.content.apps/M*100),"% of max"]})]})]})})]})},Hn=({title:n,value:t,icon:r,colorClass:e})=>x.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center space-x-4 transition-all duration-200 hover:shadow-md",children:[x.jsx("div",{className:`p-3 rounded-lg ${e} bg-opacity-10`,children:x.jsx(r,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-slate-500 font-medium",children:n}),x.jsx("h4",{className:"text-2xl font-bold text-slate-900",children:t})]})]}),ha=({selectedDistrict:n,allDistrictsData:t=[]})=>{const r=Qe(),[e,i]=q.useState([]),[o,s]=q.useState(""),[a,h]=q.useState([]),[c,l]=q.useState(!1),u=t.reduce((m,b)=>m+(b.post_count||0),0),f=t.reduce((m,b)=>m+(b.application_count||0),0),d=t.length,p=n||{district_name:"Maharashtra State",post_count:u,application_count:f,isTotal:!0};q.useEffect(()=>{(async()=>{try{const b=await ut.get("/masters/components");b.data?.success&&i(b.data.data||[])}catch(b){console.error("Failed to load components:",b)}})()},[]),q.useEffect(()=>{(async()=>{if(!n){h([]);return}l(!0);try{const b={district_id:n.district_id,is_active:!0};o&&(b.component_id=o);const M=await ut.get("/masters/posts",{params:b});if(M.data?.success){const S=M.data.data;Array.isArray(S)?h(S):S?.posts&&Array.isArray(S.posts)?h(S.posts):h([])}}catch(b){console.error("Failed to fetch posts:",b),h([])}finally{l(!1)}})()},[n,o]);const N=m=>{r(`/review/posts/${m.post_id}?district_id=${n?.district_id||""}`)};return x.jsx("div",{className:"space-y-6 h-full flex flex-col",children:x.jsxs(nr,{title:p.district_name,description:p.isTotal?"State-wide Summary":"District Details",className:"border-0 shadow-none bg-transparent p-0",children:[x.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[x.jsx(Hn,{title:"Total Posts",value:p.post_count.toLocaleString(),icon:tr,colorClass:"bg-blue-500 text-white"}),x.jsx(Hn,{title:"Total Applications",value:p.application_count.toLocaleString(),icon:er,colorClass:"bg-emerald-500 text-white"}),!p.isTotal&&x.jsx(Hn,{title:"Competition Ratio",value:p.post_count>0?(p.application_count/p.post_count).toFixed(1):"0",icon:ur,colorClass:"bg-purple-500 text-white"}),p.isTotal&&x.jsx(Hn,{title:"Total Districts",value:d,icon:ir,colorClass:"bg-orange-500 text-white"})]}),!p.isTotal&&x.jsxs("div",{className:"mt-8",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[x.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"District Posts"}),x.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[x.jsx(ar,{className:"w-4 h-4 text-slate-500"}),x.jsxs("select",{className:"w-full sm:w-auto text-sm border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 py-2 pl-3 pr-8 shadow-sm",value:o,onChange:m=>s(m.target.value),children:[x.jsx("option",{value:"",children:"All Components"}),e.map(m=>x.jsx("option",{value:m.component_id,children:m.component_name},m.component_id))]})]})]}),x.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:x.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-slate-200",children:x.jsxs("table",{className:"w-full text-sm text-left",children:[x.jsx("thead",{className:"bg-slate-50/80 text-slate-500 font-semibold border-b border-slate-200",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-4",children:"Post Name"}),x.jsx("th",{className:"px-6 py-4 text-center",children:"Positions"}),x.jsx("th",{className:"px-6 py-4 text-right",children:"Action"})]})}),x.jsx("tbody",{className:"divide-y divide-slate-100",children:c?x.jsx("tr",{children:x.jsxs("td",{colSpan:"3",className:"px-6 py-12 text-center text-slate-500",children:[x.jsx("div",{className:"flex justify-center mb-2",children:x.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}),"Loading posts..."]})}):a.length===0?x.jsx("tr",{children:x.jsx("td",{colSpan:"3",className:"px-6 py-12 text-center text-slate-500",children:"No posts found for this selection."})}):a.map(m=>x.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[x.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900",children:[x.jsx("div",{children:m.post_name}),x.jsx("div",{className:"text-xs text-slate-500 mt-0.5 font-normal",children:m.post_code})]}),x.jsx("td",{className:"px-6 py-4 text-center",children:x.jsx("span",{className:"inline-flex items-center justify-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100",children:m.total_positions})}),x.jsx("td",{className:"px-6 py-4 text-right",children:x.jsxs("button",{onClick:()=>N(m),className:"inline-flex items-center text-xs font-medium text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded-lg transition-colors",children:["Merit List ",x.jsx(sr,{className:"w-3 h-3 ml-1"})]})})]},m.post_id))})]})})})]}),p.isTotal&&x.jsxs("div",{className:"mt-8",children:[x.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3 uppercase tracking-wider",children:"Top Districts by Applications"}),x.jsx("div",{className:"space-y-3",children:[...t].sort((m,b)=>b.application_count-m.application_count).slice(0,5).map((m,b)=>x.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-200 rounded-xl shadow-sm",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("span",{className:`w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold border ${b===0?"bg-yellow-50 text-yellow-700 border-yellow-200":b===1?"bg-slate-50 text-slate-700 border-slate-200":b===2?"bg-orange-50 text-orange-700 border-orange-200":"bg-white text-slate-500 border-slate-200"}`,children:b+1}),x.jsx("span",{className:"font-medium text-slate-700",children:m.district_name})]}),x.jsx("span",{className:"text-sm font-bold text-slate-900",children:m.application_count.toLocaleString()})]},m.district_id))})]})]})})},va=()=>{const[n,t]=q.useState([]),[r,e]=q.useState(null),[i,o]=q.useState(!0);q.useEffect(()=>{(async()=>{try{const h=await ut.get("/admin/dashboard/summary-by-district");h.data?.success&&t(h.data.data)}catch(h){console.error("Failed to fetch dashboard summary:",h)}finally{o(!1)}})()},[]);const s=a=>{r?.district_name===a.district_name?e(null):e(a)};return x.jsxs("div",{className:"space-y-6 h-[calc(100vh-100px)] flex flex-col",children:[x.jsx(rr,{title:"Dashboard",description:"Overview of recruitment posts and applications across Maharashtra"}),i?x.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50 rounded-xl border border-dashed",children:x.jsx("p",{className:"text-slate-500",children:"Loading dashboard data..."})}):x.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 min-h-0",children:[x.jsx("div",{className:"w-full lg:w-[60%] h-[500px] lg:h-auto min-h-[400px]",children:x.jsx(fa,{summaryData:n,onDistrictSelect:s,selectedDistrictName:r?.district_name})}),x.jsx("div",{className:"w-full lg:w-[40%] h-auto lg:h-auto overflow-y-auto",children:x.jsx(ha,{selectedDistrict:r,allDistrictsData:n})})]})]})};export{va as default};
