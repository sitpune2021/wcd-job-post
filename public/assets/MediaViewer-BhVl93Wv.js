import{c as I,r as v,j as e,E as k,t as F}from"./index-BRObMItW.js";import{A as L,E as $,D}from"./DocumentViewer-McUr_BQF.js";import{D as E}from"./download-BP3zuujb.js";const U=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],M=I("zoom-in",U),C=({src:l,alt:a="Image",className:n="",thumbnailClassName:o="",showPreview:N=!0,onError:r=null,variant:i="thumbnail"})=>{const[c,h]=v.useState(!1),[p,x]=v.useState(!1),s=(t=>{if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))return t;const b=t.replace(/^\/+/,"");return`${F}/${b}`})(l),j=t=>{x(!0),r&&r(t)},f=async()=>{try{const b=await(await fetch(s)).blob(),y=window.URL.createObjectURL(b),d=document.createElement("a");d.href=y,d.download=a.replace(/\s+/g,"_")+".jpg",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(y)}catch(t){console.error("Download failed:",t)}},w=()=>{const t=document.createElement("a");t.href=s,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)},m=()=>{h(!0)};if(!l)return e.jsx("div",{className:`bg-slate-100 flex items-center justify-center text-slate-400 ${n||"w-24 h-24"}`,children:e.jsx("span",{className:"text-sm",children:"No image"})});if(p)return e.jsxs("div",{className:`bg-slate-100 flex flex-col items-center justify-center text-slate-400 p-2 ${n||"w-24 h-24"}`,children:[e.jsx("span",{className:"text-xs",children:"Failed to load"}),e.jsx("span",{className:"text-xs text-slate-500 truncate max-w-full",children:l.split("/").pop()})]});const u=()=>e.jsx(L,{isOpen:c,onClose:()=>h(!1),title:a,size:"2xl",headerActions:e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:f,className:"text-slate-600 hover:text-slate-800 transition-all duration-200 flex items-center gap-2 px-3 py-1.5 hover:bg-slate-100 rounded-lg",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Download"})]}),e.jsxs("button",{onClick:w,className:"text-slate-600 hover:text-slate-800 transition-all duration-200 flex items-center gap-2 px-3 py-1.5 hover:bg-slate-100 rounded-lg",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"New Tab"})]})]}),children:e.jsx("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(95vh - 100px)"},children:e.jsx("img",{src:s,alt:a,className:"max-w-full max-h-[80vh] object-contain mx-auto shadow-lg rounded-lg"})})});return i==="button"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex gap-2 ${n}`,children:[e.jsxs("button",{onClick:m,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-all duration-200",children:[e.jsx(k,{className:"w-4 h-4"}),"View"]}),e.jsxs("button",{onClick:f,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-50 rounded-lg transition-all duration-200",children:[e.jsx(E,{className:"w-4 h-4"}),"Download"]})]}),u()]}):i==="link"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:m,className:`text-blue-600 hover:text-blue-800 hover:underline text-sm inline-flex items-center gap-1 transition-all duration-200 ${n}`,children:[e.jsx(k,{className:"w-3 h-3"}),"View Image"]}),u()]}):i==="card"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-all duration-200 ${n}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s,alt:a,className:"w-10 h-10 object-cover rounded",onError:j})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:a}),e.jsx("p",{className:"text-xs text-slate-500 uppercase mt-1",children:"Image"}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:m,className:"text-xs text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"View"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:f,className:"text-xs text-slate-600 hover:text-slate-800 font-medium transition-colors",children:"Download"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:w,className:"text-xs text-slate-600 hover:text-slate-800 font-medium transition-colors",children:"Open in New Tab"})]})]})]})}),u()]}):e.jsxs(e.Fragment,{children:[N?e.jsxs("div",{className:`relative inline-block cursor-pointer group ${o}`,onClick:m,children:[e.jsx("img",{src:s,alt:a,className:`${n||"w-full h-auto"} transition-transform duration-200 group-hover:scale-105`,onError:j,onLoad:()=>console.log("Image loaded successfully:",s),loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-transparent group-hover:bg-black/40 flex items-center justify-center rounded-lg transition-all duration-200",children:e.jsx(M,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})})]}):e.jsx("img",{src:s,alt:a,className:n||"w-full h-auto",onError:j,onLoad:()=>console.log("Image loaded successfully:",s),loading:"lazy"}),u()]})},R=({src:l,fileName:a="File",alt:n="Media",variant:o="button",size:N="md",className:r="",thumbnailClassName:i="",showPreview:c=!0})=>{if(!l)return e.jsx("span",{className:"text-xs text-slate-400",children:"No file"});const p=(g=>{if(!g)return"";const s=g.match(/\.([^.]+)$/);return s?s[1].toLowerCase():""})(l),x=["jpg","jpeg","png","gif","webp","bmp","svg"].includes(p);return o==="thumbnail"?x?e.jsx(C,{src:l,alt:n,className:r,thumbnailClassName:i,showPreview:c}):e.jsx("span",{className:"text-xs text-slate-400",children:"Not an image"}):x?e.jsx(C,{src:l,alt:n,className:r,showPreview:c,variant:o}):e.jsx(D,{src:l,fileName:a,variant:o,className:r,showPreview:c})};export{C as I,R as M};
