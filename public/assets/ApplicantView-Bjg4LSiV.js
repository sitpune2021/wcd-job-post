import{c as j,b as M,u as T,r as d,j as e,B as k,G as I,F as R,z,C as F}from"./index-f2aTh8Q9.js";import{D as $}from"./DataTable-CZSwVV32.js";import{D as x}from"./DocumentViewer-DQz3PaPC.js";import{M as m}from"./MediaViewer-Cqptyhs4.js";import{a as B,b as O}from"./applicant.service-DSRQ429U.js";import{a as w,f}from"./date-za-3UH_q.js";import{A as G}from"./arrow-left-D3u76-63.js";import{M as A}from"./map-pin-Cchj0Rwk.js";import"./useDebounce-CD3y76_H.js";import"./triangle-alert-0CRYubsC.js";import"./download-BV06V_bB.js";const U=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],V=j("calendar",U);const H=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],K=j("credit-card",H);const Y=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],q=j("phone",Y),re=()=>{const{id:p}=M(),h=T(),[r,C]=d.useState(null),[N,S]=d.useState([]),[y,b]=d.useState(!0),[c,D]=d.useState("profile");if(d.useEffect(()=>{(async()=>{b(!0);try{const[s,o]=await Promise.all([B(p),O(p)]);C(s.data||s),S(o.data?.applications||o.applications||[])}catch(s){console.error("Failed to load applicant details",s),z.error("Failed to load applicant details")}finally{b(!1)}})()},[p,h]),y)return e.jsx("div",{className:"p-8 text-center",children:"Loading applicant details..."});if(!r)return e.jsx("div",{className:"p-8 text-center",children:"Applicant not found"});const a=r.personal||{},i=r.addresses?.[0]||{},_=r.education||[],v=r.experience||[],u=r.skills||[],E=r.documents||[],P=new Set(["PHOTO","SIGNATURE","AADHAAR","RESUME","DOMICILE"]),g=E.filter(t=>!P.has(t?.doc_code)),l=({label:t,value:s})=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 min-w-[150px]",children:t}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s||"-"})]}),n=({title:t,icon:s,children:o})=>e.jsxs(F,{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-2 border-b",children:[s&&e.jsx(s,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:t})]}),e.jsx("div",{className:"space-y-1",children:o})]}),L=[{key:"application_no",header:"Application No"},{key:"post_name",header:"Post Applied",render:(t,s={})=>s.post?.post_name||s.post_name||"-"},{key:"post_code",header:"Post Code",render:(t,s={})=>s.post?.post_code||s.post_code||"-"},{key:"status",header:"Status",className:"text-center",render:(t,s={})=>e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${s.status==="SELECTED"?"bg-green-100 text-green-700":s.status==="ELIGIBLE"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-800"}`,children:s.status?.replace(/_/g," ")||"-"})},{key:"submitted_at",header:"Submitted On",render:(t,s={})=>w(s.submitted_at,{includeTime:!0})},{key:"actions",header:"Actions",className:"text-center",render:(t,s={})=>e.jsx("div",{className:"flex justify-center",children:e.jsx(k,{size:"sm",variant:"ghost",onClick:()=>s.application_id&&h(`/applications/${s.application_id}`),className:"text-blue-600 hover:text-blue-900",children:"View"})})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{variant:"ghost",onClick:()=>h("/applicants"),children:e.jsx(G,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:a.full_name||r.full_name}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Applicant No: ",r.applicant_no," â€¢ Registered: ",w(r.created_at,{includeTime:!0})]})]})]}),e.jsx("div",{className:"border-b border-slate-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:["Profile","Education & Experience","Skills","Documents","Applications"].map(t=>{t.toLowerCase().replace(/ & /g,"_").replace(/ /g,"_");const s=t==="Education & Experience"?"education_experience":t.toLowerCase();return e.jsx("button",{onClick:()=>D(s),className:`py-4 px-1 border-b-2 font-medium text-sm ${c===s?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:t==="Applications"?`Applications (${N.length})`:t==="Skills"?`Skills (${u.length})`:t},s)})})}),c==="profile"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{title:"Personal Information",icon:I,children:[e.jsx(l,{label:"Full Name",value:a.full_name}),e.jsx(l,{label:"Gender",value:a.gender}),e.jsx(l,{label:"Date of Birth",value:f(a.dob)}),e.jsx(l,{label:"Marital Status",value:a.marital_status}),e.jsx(l,{label:"Aadhar Number",value:a.aadhar_no}),e.jsx(l,{label:"Domicile (Maharashtra)",value:a.domicile_maharashtra===!0?"Yes":a.domicile_maharashtra===!1?"No":"-"}),e.jsx(l,{label:"Category",value:a.category||a.category_name}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 min-w-[150px]",children:"Photo"}),a.photo_path?e.jsx(m,{src:a.photo_path,fileName:"Photo",variant:"link"}):"-"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 min-w-[150px]",children:"Signature"}),a.signature_path?e.jsx(m,{src:a.signature_path,fileName:"Signature",variant:"link"}):"-"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 min-w-[150px]",children:"Aadhaar File"}),a.aadhaar_path?e.jsx(x,{src:a.aadhaar_path,fileName:"Aadhaar",variant:"link"}):"-"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 min-w-[150px]",children:"Resume"}),a.resume_path?e.jsx(x,{src:a.resume_path,fileName:"Resume",variant:"link"}):"-"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 min-w-[150px]",children:"Domicile Certificate"}),a.domicile_path?e.jsx(x,{src:a.domicile_path,fileName:"Domicile Certificate",variant:"link"}):"-"]})]}),e.jsxs(n,{title:"Contact Information",icon:q,children:[e.jsx(l,{label:"Mobile Number",value:r.mobile_no}),e.jsx(l,{label:"Email Address",value:r.email})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{title:"Current Address",icon:A,children:[e.jsx(l,{label:"Address",value:i.address_line}),i.address_line2&&e.jsx(l,{label:"Line 2",value:i.address_line2}),e.jsx(l,{label:"District",value:i.district_name}),e.jsx(l,{label:"Taluka",value:i.taluka_name}),e.jsx(l,{label:"Pincode",value:i.pincode})]}),e.jsx(n,{title:"Permanent Address",icon:A,children:i.permanent_address_same?e.jsx("p",{className:"text-sm text-slate-500 italic py-2",children:"Same as current address"}):e.jsxs(e.Fragment,{children:[e.jsx(l,{label:"Address",value:i.permanent_address_line}),i.permanent_address_line2&&e.jsx(l,{label:"Line 2",value:i.permanent_address_line2}),e.jsx(l,{label:"District",value:i.permanent_district_name}),e.jsx(l,{label:"Taluka",value:i.permanent_taluka_name}),e.jsx(l,{label:"Pincode",value:i.permanent_pincode})]})})]})]}),c==="education_experience"&&e.jsxs("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsx(n,{title:"Education",icon:R,children:_.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Level"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800 ",children:"Degree"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Board/University"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Year"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Percentage"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Certificate"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:_.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm text-slate-900",children:t.level_name}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t.degree_name}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t.university_board}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t.passing_year}),e.jsxs("td",{className:"px-3 py-2 text-sm text-slate-500",children:[t.percentage,"%"]}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t.certificate_path?e.jsx(x,{src:t.certificate_path,fileName:"Education Certificate",variant:"link"}):"-"})]},t.education_id||s))})]})}):e.jsx("p",{className:"text-sm text-slate-500",children:"No education details found."})}),e.jsx(n,{title:"Experience",icon:V,children:v.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Organization"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Designation"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Period"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Months"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Certificate"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:v.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm text-slate-900",children:t.organization_name}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t.designation}),e.jsxs("td",{className:"px-3 py-2 text-sm text-slate-500",children:[f(t.start_date)," - ",t.is_current?"Present":f(t.end_date)]}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t.total_months}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t.certificate_path?e.jsx(x,{src:t.certificate_path,fileName:"Experience Certificate",variant:"link"}):"-"})]},t.experience_id||s))})]})}):e.jsx("p",{className:"text-sm text-slate-500",children:"No experience details found."})})]}),c==="skills"&&e.jsx("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-bottom-2",children:e.jsx(n,{title:"Skills",icon:K,children:u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Skill"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Notes"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase text-slate-800",children:"Certificate"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:u.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm text-slate-900",children:t?.skill?.skill_name||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t?.notes||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-500",children:t?.certificate_path?e.jsx(m,{src:t.certificate_path,fileName:"Skill Certificate",variant:"link"}):"-"})]},t.applicant_skill_id||s))})]})}):e.jsx("p",{className:"text-sm text-slate-500",children:"No skills found."})})}),c==="documents"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-2",children:[g.map((t,s)=>e.jsx(m,{src:t.file_path,fileName:t.doc_type_name||"Document",variant:"card"},t.document_id||s)),g.length===0&&e.jsx("div",{className:"col-span-full py-8 text-center text-slate-500",children:"No documents uploaded."})]}),c==="applications"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:e.jsx($,{columns:L,data:N,isLoading:y,rowKey:"application_id",headerClassName:"bg-slate-900 text-white",pagination:{pageSize:10}})})]})};export{re as default};
