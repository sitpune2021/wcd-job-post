import{k as E,u as k,R as e,d as I,e as L,j as s,C as B,I as c,f as l,E as i,L as m,B as O,o as R,m as A,p as F,s as w}from"./index-f2aTh8Q9.js";import{P as q}from"./PageHeader-C1BYbgZ6.js";import{C as D}from"./circle-alert-DkjwCQzJ.js";import{C as H}from"./circle-check-big-Bujd055R.js";import"./plus-CEVaGo_4.js";const M=R({old_password:w().min(1,"Current password is required"),new_password:w().min(6,"New password must be at least 6 characters"),confirm_password:w().min(1,"Please confirm your new password")}).refine(a=>a.new_password===a.confirm_password,{message:"Passwords don't match",path:["confirm_password"]}),K=()=>{const a=E(),j=k(),[N,p]=e.useState(!1),[u,h]=e.useState(null),[x,g]=e.useState(null),[r,y]=e.useState(!1),[o,C]=e.useState(!1),[t,S]=e.useState(!1),{register:n,handleSubmit:b,formState:{errors:d},reset:_}=I({resolver:L(M)}),P=async f=>{p(!0),h(null),g(null);try{await A({current_password:f.old_password,new_password:f.new_password}),g("Password changed successfully. Please login with your new password."),_(),setTimeout(()=>{a(F()),j("/login")},2e3)}catch(v){h(v.response?.data?.message||"Failed to change password")}finally{p(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(q,{title:"Security Settings",description:"Manage your account security and password preferences"}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx(B,{title:"Change Password",description:"Ensure your account is using a long, random password to stay secure.",children:s.jsxs("form",{onSubmit:b(P),className:"space-y-6 mt-4",children:[u&&s.jsxs("div",{className:"rounded-lg bg-red-50 p-4 text-sm text-red-600 border border-red-100 flex items-start gap-2",children:[s.jsx(D,{className:"h-5 w-5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Error changing password"}),s.jsx("p",{children:u})]})]}),x&&s.jsxs("div",{className:"rounded-lg bg-green-50 p-4 text-sm text-green-600 border border-green-100 flex items-start gap-2",children:[s.jsx(H,{className:"h-5 w-5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Success"}),s.jsx("p",{children:x})]})]}),s.jsx("div",{className:"max-w-md",children:s.jsx(c,{label:"Current Password",type:r?"text":"password",icon:s.jsx(m,{className:"h-4 w-4"}),endIcon:r?s.jsx(l,{className:"h-4 w-4"}):s.jsx(i,{className:"h-4 w-4"}),onEndIconClick:()=>y(!r),error:d.old_password?.message,...n("old_password"),autoComplete:"current-password"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(c,{label:"New Password",type:o?"text":"password",icon:s.jsx(m,{className:"h-4 w-4"}),endIcon:o?s.jsx(l,{className:"h-4 w-4"}):s.jsx(i,{className:"h-4 w-4"}),onEndIconClick:()=>C(!o),error:d.new_password?.message,...n("new_password"),autoComplete:"new-password"}),s.jsx(c,{label:"Confirm New Password",type:t?"text":"password",icon:s.jsx(m,{className:"h-4 w-4"}),endIcon:t?s.jsx(l,{className:"h-4 w-4"}):s.jsx(i,{className:"h-4 w-4"}),onEndIconClick:()=>S(!t),error:d.confirm_password?.message,...n("confirm_password"),autoComplete:"new-password"})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-100",children:s.jsx(O,{type:"submit",isLoading:N,className:"w-full sm:w-auto",children:"Update Password"})})]})})})]})};export{K as default};
